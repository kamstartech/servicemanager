generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model MobileUser {
  id             Int               @id @default(autoincrement())
  context        MobileUserContext
  username       String?
  phoneNumber    String?
  passwordHash   String?
  isActive       Boolean           @default(true)
  createdAt      DateTime          @default(now()) @map("created_at")
  updatedAt      DateTime          @updatedAt @map("updated_at")
  accountNumber  String?
  customerNumber String?
  beneficiaries  Beneficiary[]

  @@map("fdh_mobile_users")
}

model DatabaseConnection {
  id              Int         @id @default(autoincrement())
  name            String
  engine          String
  host            String
  port            Int
  database        String
  username        String
  password        String
  options         Json?
  isReadOnly      Boolean     @default(true)
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt
  lastTestMessage String?
  lastTestOk      Boolean?
  lastTestedAt    DateTime?
  migrations      Migration[]
}

model CoreBankingConnection {
  id              Int                   @id @default(autoincrement())
  name            String
  username        String
  password        String
  baseUrl         String
  isActive        Boolean               @default(true)
  createdAt       DateTime              @default(now())
  updatedAt       DateTime              @updatedAt
  lastTestedAt    DateTime?
  lastTestOk      Boolean?
  lastTestMessage String?
  authType        CoreBankingAuthType   @default(BASIC)
  token           String?
  endpoints       CoreBankingEndpoint[]
}

model CoreBankingEndpoint {
  id           Int                   @id @default(autoincrement())
  connectionId Int
  name         String
  method       String                @default("POST")
  path         String
  isActive     Boolean               @default(true)
  createdAt    DateTime              @default(now())
  updatedAt    DateTime              @updatedAt
  bodyTemplate String?
  connection   CoreBankingConnection @relation(fields: [connectionId], references: [id])
}

model Migration {
  id                  Int                @id @default(autoincrement())
  name                String
  description         String?
  sourceConnectionId  Int
  sourceQuery         String
  targetTable         String
  targetInsertQuery   String
  status              MigrationStatus    @default(PENDING)
  lastRunAt           DateTime?
  lastRunSuccess      Boolean?
  lastRunMessage      String?
  lastRunRowsAffected Int?
  createdAt           DateTime           @default(now())
  updatedAt           DateTime           @updatedAt
  sourceConnection    DatabaseConnection @relation(fields: [sourceConnectionId], references: [id], onDelete: Cascade)

  @@map("fdh_migrations")
}

model Beneficiary {
  id              Int             @id @default(autoincrement())
  userId          Int             @map("user_id")
  name            String
  beneficiaryType BeneficiaryType @map("beneficiary_type")
  phoneNumber     String?         @map("phone_number")
  accountNumber   String?         @map("account_number")
  bankCode        String?         @map("bank_code")
  bankName        String?         @map("bank_name")
  branch          String?
  description     String?
  isActive        Boolean         @default(true) @map("is_active")
  createdAt       DateTime        @default(now()) @map("created_at")
  updatedAt       DateTime        @updatedAt @map("updated_at")
  user            MobileUser      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, phoneNumber, beneficiaryType], name: "unique_user_wallet")
  @@unique([userId, accountNumber, beneficiaryType], name: "unique_user_internal_bank")
  @@unique([userId, accountNumber, bankCode, beneficiaryType], name: "unique_user_external_bank")
  @@index([userId])
  @@index([beneficiaryType])
  @@map("fdh_beneficiaries")
}

model AdminWebUser {
  id           Int                          @id @default(autoincrement())
  email        String                       @unique
  passwordHash String
  name         String?
  isActive     Boolean                      @default(true)
  createdAt    DateTime                     @default(now()) @map("created_at")
  updatedAt    DateTime                     @updatedAt @map("updated_at")
  resetTokens  AdminWebPasswordResetToken[]

  @@map("admin_web_users")
}

model AdminWebPasswordResetToken {
  id        Int          @id @default(autoincrement())
  token     String       @unique
  expiresAt DateTime
  usedAt    DateTime?
  userId    Int          @map("user_id")
  createdAt DateTime     @default(now()) @map("created_at")
  user      AdminWebUser @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("admin_web_password_reset_tokens")
}

model BillerConfig {
  id                  BigInt   @id @default(autoincrement())
  billerType          String   @unique(map: "biller_configs_biller_type_index") @map("biller_type") @db.VarChar(255)
  billerName          String   @unique(map: "biller_configs_biller_name_index") @map("biller_name") @db.VarChar(255)
  displayName         String   @map("display_name") @db.VarChar(255)
  description         String?
  isActive            Boolean  @default(true) @map("is_active")
  baseUrl             String   @map("base_url") @db.VarChar(255)
  endpoints           Json     @default("{}")
  authentication      Json     @default("{}")
  defaultCurrency     String   @default("MWK") @map("default_currency") @db.VarChar(255)
  supportedCurrencies String[] @default(["MWK"]) @map("supported_currencies") @db.VarChar(255)
  timeoutMs           Int      @default(30000) @map("timeout_ms")
  retryAttempts       Int      @default(3) @map("retry_attempts")
  features            Json     @default("{}")
  validationRules    Json     @default("{}") @map("validation_rules")
  inserted_at         DateTime @db.Timestamp(0)
  updatedAt           DateTime @updatedAt @map("updated_at") @db.Timestamp(0)

  @@index([defaultCurrency], map: "biller_configs_default_currency_index")
  @@index([isActive], map: "biller_configs_is_active_index")
  @@map("biller_configs")
}

model BillerTransaction {
  id                      BigInt    @id @default(autoincrement())
  billerType              String    @map("biller_type") @db.VarChar(255)
  billerName              String    @map("biller_name") @db.VarChar(255)
  accountNumber           String    @map("account_number") @db.VarChar(255)
  accountType             String?   @map("account_type") @db.VarChar(255)
  ourTransactionId        String    @unique(map: "biller_transactions_our_transaction_id_index") @map("our_transaction_id") @db.VarChar(255)
  amount                  Decimal?  @db.Decimal(15, 2)
  currency                String    @default("MWK") @db.VarChar(255)
  creditAccount           String?   @map("credit_account") @db.VarChar(255)
  creditAccountType       String?   @map("credit_account_type") @db.VarChar(255)
  debitAccount            String?   @map("debit_account") @db.VarChar(255)
  debitAccountType        String?   @map("debit_account_type") @db.VarChar(255)
  customer_account_number String?   @db.VarChar(255)
  customerAccountName     String?   @map("customer_account_name") @db.VarChar(255)
  transactionType         String    @map("transaction_type") @db.VarChar(255)
  bundleId                String?   @map("bundle_id") @db.VarChar(255)
  status                  String    @default("pending") @db.VarChar(255)
  apiEndpoint             String?   @map("api_endpoint") @db.VarChar(255)
  requestPayload          Json?     @map("request_payload")
  responsePayload         Json?     @map("response_payload")
  errorMessage            String?   @map("error_message")
  processedAt             DateTime? @map("processed_at") @db.Timestamp(0)
  inserted_at             DateTime  @db.Timestamp(0)
  updatedAt               DateTime  @updatedAt @map("updated_at") @db.Timestamp(0)

  @@index([accountNumber], map: "biller_transactions_account_number_index")
  @@index([accountNumber, status], map: "biller_transactions_account_number_status_index")
  @@index([billerType], map: "biller_transactions_biller_type_index")
  @@index([billerType, inserted_at], map: "biller_transactions_biller_type_inserted_at_index")
  @@index([billerType, status], map: "biller_transactions_biller_type_status_index")
  @@index([bundleId], map: "biller_transactions_bundle_id_index")
  @@index([inserted_at], map: "biller_transactions_inserted_at_index")
  @@index([processedAt], map: "biller_transactions_processed_at_index")
  @@index([status], map: "biller_transactions_status_index")
  @@index([transactionType], map: "biller_transactions_transaction_type_index")
  @@map("biller_transactions")
}

model SMSNotification {
  id           BigInt    @id @default(autoincrement())
  userId       Int       @map("user_id")
  status       String    @db.VarChar(255)
  sentAt       DateTime? @map("sent_at") @db.Timestamp(0)
  inserted_at  DateTime  @db.Timestamp(0)
  updatedAt    DateTime  @updatedAt @map("updated_at") @db.Timestamp(0)
  msisdn       String?   @db.VarChar(255)
  attemptCount Int?      @default(0) @map("attempt_count")
  details      Json?
  message      String?

  @@index([userId], map: "sms_notifications_user_id_index")
  @@map("sms_notifications")
}

model accounts_users {
  id                                                      BigInt                  @id @default(autoincrement())
  email                                                   String?                 @unique(map: "accounts_users_email_index") @db.Citext
  nickname                                                String?                 @db.VarChar(255)
  hashed_password                                         String                  @db.VarChar(255)
  first_name                                              String?                 @db.VarChar(255)
  last_name                                               String?                 @db.VarChar(255)
  phone_number                                            String?                 @db.VarChar(255)
  date_of_birth                                           DateTime?               @db.Date
  address                                                 String?                 @db.VarChar(255)
  city                                                    String?                 @db.VarChar(255)
  state                                                   String?                 @db.VarChar(255)
  zip                                                     String?                 @db.VarChar(255)
  country                                                 String?                 @db.VarChar(255)
  approved                                                Boolean?                @default(false)
  first_time_login                                        Boolean?                @default(true)
  account_balance                                         Float?                  @default(0.0)
  account_number                                          String?                 @db.VarChar(255)
  confirmed_at                                            DateTime?               @db.Timestamp(0)
  inserted_at                                             DateTime                @db.Timestamp(0)
  updated_at                                              DateTime                @db.Timestamp(0)
  email_notifications                                     Boolean?                @default(true)
  sms_notifications                                       Boolean?                @default(true)
  push_notifications                                      Boolean?                @default(true)
  memorable_word                                          String?                 @db.VarChar(255)
  otp                                                     String?                 @db.VarChar(255)
  customer_no                                             String?                 @db.VarChar(255)
  roles_and_permission_id                                 Int?
  username                                                String?                 @db.VarChar(255)
  profile_name                                            String?                 @default("") @db.VarChar(255)
  company                                                 String?                 @default("") @db.VarChar(255)
  inputter                                                String?                 @default("") @db.VarChar(255)
  authoriser                                              String?                 @default("") @db.VarChar(255)
  customer_number                                         String?                 @default("") @db.VarChar(255)
  account_officer                                         String?                 @default("") @db.VarChar(255)
  profile_type                                            String?                 @default("") @db.VarChar(255)
  disabled                                                Boolean                 @default(false)
  session_id                                              String?                 @db.Uuid
  disabled_reason                                         String?                 @db.VarChar(255)
  approval_reason                                         String?                 @db.VarChar(255)
  deregistration_reason                                   String?                 @db.VarChar(255)
  working_balance                                         Float?                  @default(0.0)
  clearing_balance                                        Float?                  @default(0.0)
  primary_device_id                                       String?
  deletion_status                                         Boolean?                @default(false)
  allow_multi_session                                     Boolean                 @default(true)
  tester                                                  Boolean?                @default(false)
  allow_cheque_request_upload                             Boolean?                @default(false)
  accounts_users_tokens                                   accounts_users_tokens[]
  active_devices                                          active_devices[]
  bank_accounts                                           bank_accounts[]
  beneficiaries                                           beneficiaries[]
  cardless_withdraws                                      cardless_withdraws[]
  cheque_book_requests                                    cheque_book_requests[]
  cheque_requests                                         cheque_requests[]
  fund_accounts                                           fund_accounts[]
  fund_requests_fund_requests_receiver_idToaccounts_users fund_requests[]         @relation("fund_requests_receiver_idToaccounts_users")
  fund_requests_fund_requests_sender_idToaccounts_users   fund_requests[]         @relation("fund_requests_sender_idToaccounts_users")
  ip_whitelists                                           ip_whitelists[]
  loan_applications                                       loan_applications[]
  loan_customers                                          loan_customers[]
  loan_terms                                              loan_terms[]
  loans                                                   loans[]
  tokens                                                  tokens[]
  transactions                                            transactions[]
  user_tracking                                           user_tracking[]

  @@index([deletion_status], map: "accounts_users_deletion_status_index")
  @@index([session_id], map: "accounts_users_session_id_index")
}

model accounts_users_tokens {
  id             BigInt         @id @default(autoincrement())
  user_id        BigInt
  token          Bytes
  context        String         @db.VarChar(255)
  sent_to        String?        @db.VarChar(255)
  inserted_at    DateTime       @db.Timestamp(0)
  accounts_users accounts_users @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([context, token], map: "accounts_users_tokens_context_token_index")
  @@index([user_id], map: "accounts_users_tokens_user_id_index")
}

model active_devices {
  id                     BigInt               @id @default(autoincrement())
  device_id              String
  last_seen_at           DateTime             @db.Timestamp(0)
  user_id                BigInt?
  wallet_user_id         BigInt?
  inserted_at            DateTime             @db.Timestamp(0)
  updated_at             DateTime             @db.Timestamp(0)
  third_party_api_key_id BigInt?
  device_name            String?              @db.VarChar(255)
  enabled                Boolean?             @default(true)
  blocked                Boolean?             @default(false)
  static_access_token    String?
  device_screen_message  String?              @db.VarChar(255)
  on_hold                Boolean?
  third_party_api_key    third_party_api_key? @relation(fields: [third_party_api_key_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  accounts_users         accounts_users?      @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  walletusers            walletusers?         @relation(fields: [wallet_user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([device_id, third_party_api_key_id], map: "active_devices_device_id_third_party_api_key_id_index")
  @@index([last_seen_at], map: "active_devices_last_seen_at_index")
  @@index([user_id], map: "active_devices_user_id_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model api_documentation_configs {
  id                   BigInt   @id @default(autoincrement())
  title                String   @default("API Documentation") @db.VarChar(255)
  description          String?
  version              String   @default("1.0.0") @db.VarChar(255)
  base_url             String?  @db.VarChar(255)
  contact_name         String?  @db.VarChar(255)
  contact_email        String?  @db.VarChar(255)
  contact_url          String?  @db.VarChar(255)
  license_name         String?  @default("MIT") @db.VarChar(255)
  license_url          String?  @db.VarChar(255)
  terms_of_service_url String?  @db.VarChar(255)
  logo_image_uri       String?  @db.VarChar(255)
  logo_image_base64    String?
  image_storage_type   String   @default("uri") @db.VarChar(255)
  active               Boolean  @default(true)
  inserted_at          DateTime @db.Timestamp(0)
  updated_at           DateTime @db.Timestamp(0)

  @@index([active], map: "api_documentation_configs_active_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model api_documentation_sections {
  id                               BigInt                       @id @default(autoincrement())
  title                            String                       @db.VarChar(255)
  slug                             String                       @unique(map: "api_documentation_sections_slug_index") @db.VarChar(255)
  content                          String
  order_priority                   Int                          @default(0)
  parent_section_id                BigInt?
  section_type                     String                       @db.VarChar(255)
  image_uri                        String?                      @db.VarChar(255)
  image_base64                     String?
  image_storage_type               String?                      @default("uri") @db.VarChar(255)
  image_caption                    String?                      @db.VarChar(255)
  show_in_sidebar                  Boolean                      @default(true)
  published                        Boolean                      @default(true)
  meta_title                       String?                      @db.VarChar(255)
  meta_description                 String?                      @db.VarChar(255)
  meta_keywords                    String[]                     @default([]) @db.VarChar(255)
  created_by_id                    BigInt?
  inserted_at                      DateTime                     @db.Timestamp(0)
  updated_at                       DateTime                     @db.Timestamp(0)
  tbl_system_users                 tbl_system_users?            @relation(fields: [created_by_id], references: [id], onUpdate: NoAction)
  api_documentation_sections       api_documentation_sections?  @relation("api_documentation_sectionsToapi_documentation_sections", fields: [parent_section_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  other_api_documentation_sections api_documentation_sections[] @relation("api_documentation_sectionsToapi_documentation_sections")

  @@index([created_by_id], map: "api_documentation_sections_created_by_id_index")
  @@index([order_priority], map: "api_documentation_sections_order_priority_index")
  @@index([parent_section_id], map: "api_documentation_sections_parent_section_id_index")
  @@index([published], map: "api_documentation_sections_published_index")
  @@index([section_type], map: "api_documentation_sections_section_type_index")
  @@index([show_in_sidebar], map: "api_documentation_sections_show_in_sidebar_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model api_endpoint_schemas {
  id              BigInt        @id @default(autoincrement())
  api_endpoint_id BigInt
  api_schema_id   BigInt
  usage_type      String        @db.VarChar(255)
  order_priority  Int?          @default(0)
  inserted_at     DateTime      @db.Timestamp(0)
  updated_at      DateTime      @db.Timestamp(0)
  api_endpoints   api_endpoints @relation(fields: [api_endpoint_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  api_schemas     api_schemas   @relation(fields: [api_schema_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([api_endpoint_id, api_schema_id, usage_type], map: "api_endpoint_schemas_api_endpoint_id_api_schema_id_usage_type_i")
  @@index([api_endpoint_id], map: "api_endpoint_schemas_api_endpoint_id_index")
  @@index([api_schema_id], map: "api_endpoint_schemas_api_schema_id_index")
  @@index([usage_type], map: "api_endpoint_schemas_usage_type_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model api_endpoints {
  id                      BigInt                 @id @default(autoincrement())
  name                    String                 @db.VarChar(255)
  method                  String                 @db.VarChar(255)
  path                    String                 @db.VarChar(255)
  summary                 String?                @db.VarChar(255)
  description             String?
  tags                    String[]               @default([]) @db.VarChar(255)
  category                String?                @db.VarChar(255)
  deprecated              Boolean                @default(false)
  authentication_required Boolean                @default(true)
  rate_limited            Boolean                @default(false)
  rate_limit_count        Int?
  rate_limit_period       String?                @db.VarChar(255)
  image_uri               String?                @db.VarChar(255)
  image_base64            String?
  image_storage_type      String?                @default("uri") @db.VarChar(255)
  image_caption           String?                @db.VarChar(255)
  order_priority          Int                    @default(0)
  external_docs_url       String?                @db.VarChar(255)
  dynamic_route_id        BigInt?
  context_id              BigInt?
  created_by_id           BigInt?
  inserted_at             DateTime               @db.Timestamp(0)
  updated_at              DateTime               @db.Timestamp(0)
  api_endpoint_schemas    api_endpoint_schemas[]
  mobile_form_contexts    mobile_form_contexts?  @relation(fields: [context_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  tbl_system_users        tbl_system_users?      @relation(fields: [created_by_id], references: [id], onUpdate: NoAction)
  dynamic_routes          dynamic_routes?        @relation(fields: [dynamic_route_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  api_examples            api_examples[]
  api_parameters          api_parameters[]
  api_responses           api_responses[]

  @@unique([method, path, context_id], map: "api_endpoints_method_path_context_id_index")
  @@index([authentication_required], map: "api_endpoints_authentication_required_index")
  @@index([category], map: "api_endpoints_category_index")
  @@index([context_id], map: "api_endpoints_context_id_index")
  @@index([created_by_id], map: "api_endpoints_created_by_id_index")
  @@index([deprecated], map: "api_endpoints_deprecated_index")
  @@index([dynamic_route_id], map: "api_endpoints_dynamic_route_id_index")
  @@index([method, path], map: "api_endpoints_method_path_index")
  @@index([order_priority], map: "api_endpoints_order_priority_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model api_examples {
  id                 BigInt        @id @default(autoincrement())
  name               String        @db.VarChar(255)
  description        String?
  example_type       String        @db.VarChar(255)
  scenario           String        @db.VarChar(255)
  http_status        Int?
  headers            Json?         @default("{}")
  body               Json?
  query_params       Json?         @default("{}")
  path_params        Json?         @default("{}")
  image_uri          String?       @db.VarChar(255)
  image_base64       String?
  image_storage_type String?       @default("uri") @db.VarChar(255)
  image_caption      String?       @db.VarChar(255)
  order_priority     Int           @default(0)
  api_endpoint_id    BigInt
  api_schema_id      BigInt?
  inserted_at        DateTime      @db.Timestamp(0)
  updated_at         DateTime      @db.Timestamp(0)
  api_endpoints      api_endpoints @relation(fields: [api_endpoint_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  api_schemas        api_schemas?  @relation(fields: [api_schema_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([api_endpoint_id], map: "api_examples_api_endpoint_id_index")
  @@index([api_schema_id], map: "api_examples_api_schema_id_index")
  @@index([example_type], map: "api_examples_example_type_index")
  @@index([http_status], map: "api_examples_http_status_index")
  @@index([order_priority], map: "api_examples_order_priority_index")
  @@index([scenario], map: "api_examples_scenario_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model api_parameters {
  id              BigInt        @id @default(autoincrement())
  name            String        @db.VarChar(255)
  parameter_type  String        @db.VarChar(255)
  data_type       String        @db.VarChar(255)
  required        Boolean       @default(false)
  description     String?
  example_value   String?       @db.VarChar(255)
  default_value   String?       @db.VarChar(255)
  enum_values     String[]      @default([]) @db.VarChar(255)
  pattern         String?       @db.VarChar(255)
  minimum         Int?
  maximum         Int?
  min_length      Int?
  max_length      Int?
  min_items       Int?
  max_items       Int?
  deprecated      Boolean       @default(false)
  order_priority  Int           @default(0)
  api_endpoint_id BigInt
  inserted_at     DateTime      @db.Timestamp(0)
  updated_at      DateTime      @db.Timestamp(0)
  api_endpoints   api_endpoints @relation(fields: [api_endpoint_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([api_endpoint_id], map: "api_parameters_api_endpoint_id_index")
  @@index([data_type], map: "api_parameters_data_type_index")
  @@index([deprecated], map: "api_parameters_deprecated_index")
  @@index([order_priority], map: "api_parameters_order_priority_index")
  @@index([parameter_type], map: "api_parameters_parameter_type_index")
  @@index([required], map: "api_parameters_required_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model api_responses {
  id                 BigInt        @id @default(autoincrement())
  http_status        Int
  description        String?
  content_type       String        @default("application/json") @db.VarChar(255)
  example_body       Json?
  headers            Json?         @default("{}")
  image_uri          String?       @db.VarChar(255)
  image_base64       String?
  image_storage_type String?       @default("uri") @db.VarChar(255)
  image_caption      String?       @db.VarChar(255)
  api_endpoint_id    BigInt
  api_schema_id      BigInt?
  inserted_at        DateTime      @db.Timestamp(0)
  updated_at         DateTime      @db.Timestamp(0)
  api_endpoints      api_endpoints @relation(fields: [api_endpoint_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  api_schemas        api_schemas?  @relation(fields: [api_schema_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([api_endpoint_id, http_status], map: "api_responses_api_endpoint_id_http_status_index")
  @@index([api_endpoint_id], map: "api_responses_api_endpoint_id_index")
  @@index([api_schema_id], map: "api_responses_api_schema_id_index")
  @@index([content_type], map: "api_responses_content_type_index")
  @@index([http_status], map: "api_responses_http_status_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model api_schemas {
  id                   BigInt                 @id @default(autoincrement())
  name                 String                 @db.VarChar(255)
  title                String?                @db.VarChar(255)
  description          String?
  schema_type          String                 @db.VarChar(255)
  json_schema          Json
  example_data         Json?
  image_uri            String?                @db.VarChar(255)
  image_base64         String?
  image_storage_type   String?                @default("uri") @db.VarChar(255)
  image_caption        String?                @db.VarChar(255)
  version              String                 @default("1.0.0") @db.VarChar(255)
  deprecated           Boolean                @default(false)
  tags                 String[]               @default([]) @db.VarChar(255)
  created_by_id        BigInt?
  context_id           BigInt?
  dynamic_form_id      BigInt?
  inserted_at          DateTime               @db.Timestamp(0)
  updated_at           DateTime               @db.Timestamp(0)
  api_endpoint_schemas api_endpoint_schemas[]
  api_examples         api_examples[]
  api_responses        api_responses[]
  mobile_form_contexts mobile_form_contexts?  @relation(fields: [context_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  tbl_system_users     tbl_system_users?      @relation(fields: [created_by_id], references: [id], onUpdate: NoAction)
  dynamic_forms        dynamic_forms?         @relation(fields: [dynamic_form_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([name, context_id], map: "api_schemas_name_context_id_index")
  @@index([context_id], map: "api_schemas_context_id_index")
  @@index([created_by_id], map: "api_schemas_created_by_id_index")
  @@index([deprecated], map: "api_schemas_deprecated_index")
  @@index([dynamic_form_id], map: "api_schemas_dynamic_form_id_index")
  @@index([name], map: "api_schemas_name_index")
  @@index([schema_type], map: "api_schemas_schema_type_index")
  @@index([version], map: "api_schemas_version_index")
}

model balance_snapshots {
  id              BigInt   @id @default(autoincrement())
  account_id      Int
  transaction_id  Int
  balance_type    String   @db.VarChar(255)
  balance         Decimal  @db.Decimal(20, 2)
  working_balance Decimal? @db.Decimal(20, 2)
  cleared_balance Decimal? @db.Decimal(20, 2)
  currency        String?  @db.VarChar(255)
  snapshot_reason String?  @db.VarChar(255)
  inserted_at     DateTime @db.Timestamp(0)
  updated_at      DateTime @db.Timestamp(0)

  @@index([account_id], map: "balance_snapshots_account_id_index")
  @@index([balance_type], map: "balance_snapshots_balance_type_index")
  @@index([inserted_at], map: "balance_snapshots_inserted_at_index")
  @@index([transaction_id], map: "balance_snapshots_transaction_id_index")
}

model bank_accounts {
  id             BigInt         @id @default(autoincrement())
  tag            String?        @db.VarChar(255)
  name           String         @db.VarChar(255)
  number         String         @unique(map: "bank_accounts_number_index") @db.VarChar(255)
  type           String         @db.VarChar(255)
  currency       String         @db.VarChar(255)
  balance        Decimal        @db.Decimal
  user_id        BigInt
  inserted_at    DateTime       @db.Timestamp(0)
  updated_at     DateTime       @db.Timestamp(0)
  accounts_users accounts_users @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([user_id], map: "bank_accounts_user_id_index")
}

model beneficiaries {
  id               BigInt          @id @default(autoincrement())
  name             String          @db.VarChar(255)
  account_number   String          @db.VarChar(255)
  bank_code        String          @db.VarChar(255)
  currency         String?         @db.VarChar(255)
  description      String?
  status           String?         @default("active") @db.VarChar(255)
  is_default       Boolean?        @default(false)
  inserted_at      DateTime        @db.Timestamp(0)
  updated_at       DateTime        @db.Timestamp(0)
  user_id          BigInt?
  beneficiary_type String?         @db.VarChar(255)
  wallet_id        BigInt?
  accounts_users   accounts_users? @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  walletusers      walletusers?    @relation(fields: [wallet_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([user_id], map: "beneficiaries_user_id_index")
}

model billers_messages {
  id           BigInt   @id @default(autoincrement())
  name         String?  @db.VarChar(255)
  payload      Json?
  payload_str  String?
  response     Json?
  response_str String?
  status_code  String?  @db.VarChar(255)
  inserted_at  DateTime @db.Timestamp(0)
  updated_at   DateTime @db.Timestamp(0)
}

model callback_registry {
  id                BigInt      @id @default(autoincrement())
  callback_url      String      @db.VarChar(255)
  api_key           String?     @db.VarChar(255)
  secret_key        String?     @db.VarChar(255)
  status            String?     @default("active") @db.VarChar(255)
  callback_type     String      @db.VarChar(255)
  retry_count       Int?        @default(0)
  last_called_at    DateTime?   @db.Timestamp(0)
  metadata          Json?       @default("{}")
  headers           Json?       @default("{}")
  inserted_at       DateTime    @db.Timestamp(0)
  updated_at        DateTime    @db.Timestamp(0)
  validation_scheme Json?       @default("{}")
  callbacks         callbacks[]

  @@index([callback_type], map: "callback_registry_callback_type_index")
  @@index([status], map: "callback_registry_status_index")
}

model callbacks {
  id                   BigInt             @id @default(autoincrement())
  callback_type        String             @db.VarChar(255)
  callback_url         String             @db.VarChar(255)
  request_headers      Json
  request_body         Json
  response_status      Int?
  response_body        Json?
  response_headers     Json?
  duration_ms          Int?
  status               String             @default("pending") @db.VarChar(255)
  error_message        String?
  retry_count          Int?               @default(0)
  next_retry_at        DateTime?          @db.Timestamp(0)
  metadata             Json?              @default("{}")
  callback_registry_id BigInt?
  inserted_at          DateTime           @db.Timestamp(0)
  updated_at           DateTime           @db.Timestamp(0)
  callback_registry    callback_registry? @relation(fields: [callback_registry_id], references: [id], onUpdate: NoAction)

  @@index([callback_registry_id], map: "callbacks_callback_registry_id_index")
  @@index([callback_type], map: "callbacks_callback_type_index")
  @@index([next_retry_at], map: "callbacks_next_retry_at_index")
  @@index([status], map: "callbacks_status_index")
}

model cardless_wallet_withdraws {
  id                BigInt      @id @default(autoincrement())
  amount            Decimal     @db.Decimal
  reference_number  String      @unique(map: "cardless_wallet_withdraws_reference_number_index") @db.VarChar(255)
  status            String?     @default("pending") @db.VarChar(255)
  otp               String?     @db.VarChar(255)
  otp_verified      Boolean?    @default(false)
  suspense_account  String?     @db.VarChar(255)
  narration         String?     @db.VarChar(255)
  source_wallet     String      @db.VarChar(255)
  beneficiary_phone String      @db.VarChar(255)
  beneficiary_name  String      @db.VarChar(255)
  wallet_user_id    BigInt
  inserted_at       DateTime    @db.Timestamp(0)
  updated_at        DateTime    @db.Timestamp(0)
  walletusers       walletusers @relation(fields: [wallet_user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([wallet_user_id], map: "cardless_wallet_withdraws_wallet_user_id_index")
}

model cardless_withdraws {
  id                BigInt         @id @default(autoincrement())
  amount            Decimal        @db.Decimal
  reference_number  String         @unique(map: "cardless_withdraws_reference_number_index") @db.VarChar(255)
  status            String?        @default("pending") @db.VarChar(255)
  otp               String?        @db.VarChar(255)
  otp_verified      Boolean?       @default(false)
  suspense_account  String?        @db.VarChar(255)
  narration         String?        @db.VarChar(255)
  source_account    String         @db.VarChar(255)
  beneficiary_phone String         @db.VarChar(255)
  beneficiary_name  String         @db.VarChar(255)
  user_id           BigInt
  inserted_at       DateTime       @db.Timestamp(0)
  updated_at        DateTime       @db.Timestamp(0)
  accounts_users    accounts_users @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([user_id], map: "cardless_withdraws_user_id_index")
}

model cards {
  id                                            BigInt          @id @default(autoincrement())
  token                                         String?         @unique(map: "cards_token_index") @db.VarChar(255)
  last4                                         String?         @db.VarChar(255)
  exp_month                                     Int?
  exp_year                                      Int?
  brand                                         String?         @db.VarChar(255)
  inserted_at                                   DateTime        @db.Timestamp(0)
  updated_at                                    DateTime        @db.Timestamp(0)
  account_id                                    BigInt?
  fund_accounts_cards_account_idTofund_accounts fund_accounts?  @relation("cards_account_idTofund_accounts", fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  fund_accounts_fund_accounts_cards_idTocards   fund_accounts[] @relation("fund_accounts_cards_idTocards")
}

model changelog_items {
  id          BigInt   @id @default(autoincrement())
  item_type   String   @db.VarChar(255)
  title       String   @db.VarChar(255)
  description String
  version_id  BigInt
  inserted_at DateTime @db.Timestamp(0)
  updated_at  DateTime @db.Timestamp(0)
  versions    versions @relation(fields: [version_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([item_type], map: "changelog_items_item_type_index")
  @@index([version_id], map: "changelog_items_version_id_index")
}

model cheque_book_requests {
  id                BigInt          @id @default(autoincrement())
  account_number    String          @db.VarChar(255)
  branch_code       String          @db.VarChar(255)
  cheque_leaves     Int?            @default(25)
  request_status    String?         @default("pending") @db.VarChar(255)
  issued_at         DateTime?       @db.Timestamp(0)
  fulfilled_at      DateTime?       @db.Timestamp(0)
  inserted_at       DateTime        @db.Timestamp(0)
  updated_at        DateTime        @db.Timestamp(0)
  uid               String          @unique(map: "cheque_book_requests_uid_index") @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  number_of_leaves  Int?            @default(25)
  request_reason    String?         @db.VarChar(255)
  rejection_reason  String?         @db.VarChar(255)
  request_reference String?         @unique(map: "cheque_book_requests_request_reference_index") @db.VarChar(255)
  bank_code         String?         @db.VarChar(255)
  user_id           BigInt?
  accounts_users    accounts_users? @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([account_number], map: "cheque_book_requests_account_number_index")
  @@index([request_status], map: "cheque_book_requests_request_status_index")
  @@index([user_id], map: "cheque_book_requests_user_id_index")
}

model cheque_requests {
  id             BigInt         @id @default(autoincrement())
  action         String         @db.VarChar(255)
  cheque_number  String         @db.VarChar(255)
  account_number String         @db.VarChar(255)
  status         String?        @default("pending") @db.VarChar(255)
  processed_at   DateTime?      @db.Timestamp(0)
  processed_by   String?        @db.VarChar(255)
  remarks        String?
  user_id        BigInt
  inserted_at    DateTime       @db.Timestamp(0)
  updated_at     DateTime       @db.Timestamp(0)
  accounts_users accounts_users @relation(fields: [user_id], references: [id], onUpdate: NoAction)

  @@index([account_number], map: "cheque_requests_account_number_index")
  @@index([cheque_number], map: "cheque_requests_cheque_number_index")
  @@index([status], map: "cheque_requests_status_index")
  @@index([user_id], map: "cheque_requests_user_id_index")
}

model code_steps {
  id                                                          BigInt            @id @default(autoincrement())
  process_id                                                  BigInt
  step_type                                                   String            @db.VarChar(255)
  content                                                     String
  parent_step_id                                              BigInt?
  order_position                                              Int               @default(0)
  indentation_level                                           Int               @default(0)
  expected_inputs                                             Json?             @default("{}")
  input_count                                                 Int?              @default(1)
  is_root                                                     Boolean?          @default(false)
  step_category                                               String?           @db.VarChar(255)
  created_by_id                                               BigInt?
  inserted_at                                                 DateTime          @db.Timestamp(0)
  updated_at                                                  DateTime          @db.Timestamp(0)
  is_template                                                 Boolean           @default(false)
  step_group                                                  String?           @db.VarChar(255)
  step_class                                                  String?           @db.VarChar(255)
  usage_count                                                 Int               @default(0)
  template_params                                             Json?
  tags                                                        String[]          @default([]) @db.VarChar(255)
  description                                                 String?
  popularity_score                                            Float?            @default(0.0)
  is_featured                                                 Boolean?          @default(false)
  author_id                                                   BigInt?
  tbl_system_users_code_steps_author_idTotbl_system_users     tbl_system_users? @relation("code_steps_author_idTotbl_system_users", fields: [author_id], references: [id], onUpdate: NoAction)
  tbl_system_users_code_steps_created_by_idTotbl_system_users tbl_system_users? @relation("code_steps_created_by_idTotbl_system_users", fields: [created_by_id], references: [id], onUpdate: NoAction)
  code_steps                                                  code_steps?       @relation("code_stepsTocode_steps", fields: [parent_step_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  other_code_steps                                            code_steps[]      @relation("code_stepsTocode_steps")
  dynamic_processes                                           dynamic_processes @relation(fields: [process_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([is_featured], map: "code_steps_is_featured_index")
  @@index([is_template], map: "code_steps_is_template_index")
  @@index([parent_step_id], map: "code_steps_parent_step_id_index")
  @@index([popularity_score], map: "code_steps_popularity_score_index")
  @@index([process_id], map: "code_steps_process_id_index")
  @@index([process_id, is_root], map: "code_steps_process_id_is_root_index")
  @@index([process_id, order_position], map: "code_steps_process_id_order_position_index")
  @@index([step_category], map: "code_steps_step_category_index")
  @@index([step_class], map: "code_steps_step_class_index")
  @@index([step_group], map: "code_steps_step_group_index")
  @@index([step_type], map: "code_steps_step_type_index")
  @@index([tags], map: "code_steps_tags_index", type: Gin)
  @@index([usage_count], map: "code_steps_usage_count_index")
}

model currencies {
  id            BigInt   @id @default(autoincrement())
  code          String   @unique(map: "currencies_code_index") @db.VarChar(5)
  name          String   @db.VarChar(255)
  symbol        String?  @db.VarChar(5)
  country       String?  @db.VarChar(255)
  exchange_rate Decimal? @default(0.0) @db.Decimal(15, 6)
  minor_unit    Int?     @default(2)
  status        String?  @default("inactive") @db.VarChar(255)
  notes         String?
  created_by    Int?
  updated_by    Int?
  inserted_at   DateTime @db.Timestamp(0)
  updated_at    DateTime @db.Timestamp(0)
  is_active     Boolean? @default(true)
}

model custom_table_fields {
  id               BigInt        @id @default(autoincrement())
  custom_table_id  BigInt
  field_name       String        @db.VarChar(255)
  field_type       String        @db.VarChar(255)
  display_label    String        @db.VarChar(255)
  is_required      Boolean?      @default(false)
  is_unique        Boolean?      @default(false)
  default_value    String?       @db.VarChar(255)
  max_length       Int?
  precision        Int?
  scale            Int?
  field_order      Int?          @default(0)
  validation_rules Json?         @default("{}")
  help_text        String?
  created_by       String?       @db.VarChar(255)
  updated_by       String?       @db.VarChar(255)
  inserted_at      DateTime      @db.Timestamp(0)
  updated_at       DateTime      @db.Timestamp(0)
  custom_tables    custom_tables @relation(fields: [custom_table_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([custom_table_id, field_name], map: "custom_table_fields_custom_table_id_field_name_index")
  @@index([custom_table_id], map: "custom_table_fields_custom_table_id_index")
  @@index([field_order], map: "custom_table_fields_field_order_index")
}

model custom_tables {
  id                   BigInt                @id @default(autoincrement())
  name                 String                @db.VarChar(255)
  table_name           String                @unique(map: "custom_tables_table_name_index") @db.VarChar(255)
  description          String?
  is_created           Boolean?              @default(false)
  context_id           BigInt?
  created_by           String?               @db.VarChar(255)
  updated_by           String?               @db.VarChar(255)
  inserted_at          DateTime              @db.Timestamp(0)
  updated_at           DateTime              @db.Timestamp(0)
  custom_table_fields  custom_table_fields[]
  mobile_form_contexts mobile_form_contexts? @relation(fields: [context_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([context_id], map: "custom_tables_context_id_index")
}

model deleted_archive {
  id                                                            BigInt            @id @default(autoincrement())
  item                                                          String            @db.VarChar(255)
  item_id                                                       Int
  description                                                   String?
  data                                                          Json?
  created_by                                                    BigInt?
  updated_by                                                    BigInt?
  inserted_at                                                   DateTime          @db.Timestamp(0)
  updated_at                                                    DateTime          @db.Timestamp(0)
  tbl_system_users_deleted_archive_created_byTotbl_system_users tbl_system_users? @relation("deleted_archive_created_byTotbl_system_users", fields: [created_by], references: [id], onDelete: Restrict, onUpdate: NoAction)
  tbl_system_users_deleted_archive_updated_byTotbl_system_users tbl_system_users? @relation("deleted_archive_updated_byTotbl_system_users", fields: [updated_by], references: [id], onDelete: Restrict, onUpdate: NoAction)
}

model device_sessions {
  id                String    @id @db.Uuid
  device_id         String?   @db.VarChar(255)
  user_id           String?   @db.VarChar(255)
  wallet_user_id    String?   @db.VarChar(255)
  third_party_id    String?   @db.VarChar(255)
  session_token     String?   @unique(map: "device_sessions_session_token_index") @db.VarChar(255)
  access_token      String?   @unique(map: "device_sessions_access_token_index") @db.VarChar(255)
  access_code       String?   @db.VarChar(255)
  salt              String?   @db.VarChar(255)
  secret            String?   @db.VarChar(255)
  refresh_token     String?   @db.VarChar(255)
  token_hash        String?   @db.VarChar(255)
  expires_at        DateTime? @db.Timestamp(0)
  last_activity_at  DateTime? @db.Timestamp(0)
  ip_address        String?   @db.VarChar(255)
  user_agent        String?   @db.VarChar(255)
  is_active         Boolean?  @default(true)
  revoked_at        DateTime? @db.Timestamp(0)
  revocation_reason String?   @db.VarChar(255)
  inserted_at       DateTime  @db.Timestamp(0)
  updated_at        DateTime  @db.Timestamp(0)
}

model dynamic_forms {
  id                           BigInt                         @id @default(autoincrement())
  name                         String                         @db.VarChar(255)
  description                  String?
  http_method                  String                         @db.VarChar(255)
  form                         Json
  validation_schema            Json
  required                     Boolean?                       @default(true)
  inserted_at                  DateTime                       @db.Timestamp(0)
  updated_at                   DateTime                       @db.Timestamp(0)
  context_id                   BigInt?
  api_schemas                  api_schemas[]
  mobile_form_contexts         mobile_form_contexts?          @relation(fields: [context_id], references: [id], onUpdate: NoAction)
  dynamic_route_forms          dynamic_route_forms[]
// form_wizard_steps            form_wizard_steps[]
  mobile_form_validation_links mobile_form_validation_links[]

  @@index([context_id], map: "dynamic_forms_context_id_index")
  @@index([http_method], map: "dynamic_forms_http_method_index")
  @@index([name], map: "dynamic_forms_name_index")
}

model dynamic_processes {
  id                                                                           BigInt                @id @default(autoincrement())
  name                                                                         String                @db.VarChar(255)
  description                                                                  String?
  code                                                                         String
  expected_params                                                              Json?                 @default("{}")
  created_by_id                                                                BigInt?
  inserted_at                                                                  DateTime              @db.Timestamp(0)
  updated_at                                                                   DateTime              @db.Timestamp(0)
  category                                                                     String?               @default("General") @db.VarChar(255)
  group                                                                        String?               @default("User Plugins") @db.VarChar(255)
  plugin_type                                                                  String?               @default("public") @db.VarChar(255)
  rating                                                                       Decimal?              @default(0.0) @db.Decimal(3, 2)
  downloads                                                                    Int?                  @default(0)
  tags                                                                         String[]              @default([]) @db.VarChar(255)
  version                                                                      String?               @default("1.0.0") @db.VarChar(255)
  author                                                                       String?               @db.VarChar(255)
  license                                                                      String?               @default("MIT") @db.VarChar(255)
  repository_url                                                               String?               @db.VarChar(255)
  documentation_url                                                            String?               @db.VarChar(255)
  featured                                                                     Boolean?              @default(false)
  verified                                                                     Boolean?              @default(false)
  execution_mode                                                               String                @default("plugin_code") @db.VarChar(255)
  sync_status                                                                  String                @default("pending") @db.VarChar(255)
  last_synced_at                                                               DateTime?             @db.Timestamp(0)
  context_id                                                                   BigInt?
  code_steps                                                                   code_steps[]
  mobile_form_contexts                                                         mobile_form_contexts? @relation(fields: [context_id], references: [id], onUpdate: NoAction)
  tbl_system_users                                                             tbl_system_users?     @relation(fields: [created_by_id], references: [id], onUpdate: NoAction)
  process_chain_links_process_chain_links_source_process_idTodynamic_processes process_chain_links[] @relation("process_chain_links_source_process_idTodynamic_processes")
  process_chain_links_process_chain_links_target_process_idTodynamic_processes process_chain_links[] @relation("process_chain_links_target_process_idTodynamic_processes")
  route_process_links                                                          route_process_links[]

  @@index([category], map: "dynamic_processes_category_index")
  @@index([context_id], map: "dynamic_processes_context_id_index")
  @@index([execution_mode], map: "dynamic_processes_execution_mode_index")
  @@index([featured], map: "dynamic_processes_featured_index")
  @@index([group], map: "dynamic_processes_group_index")
  @@index([name], map: "dynamic_processes_name_index")
  @@index([plugin_type], map: "dynamic_processes_plugin_type_index")
  @@index([rating], map: "dynamic_processes_rating_index")
  @@index([sync_status], map: "dynamic_processes_sync_status_index")
  @@index([verified], map: "dynamic_processes_verified_index")
}

model dynamic_route_forms {
  route_id       BigInt
  form_id        BigInt
  inserted_at    DateTime       @db.Timestamp(0)
  updated_at     DateTime       @db.Timestamp(0)
  dynamic_forms  dynamic_forms  @relation(fields: [form_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  dynamic_routes dynamic_routes @relation(fields: [route_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([route_id, form_id], map: "dynamic_route_forms_route_id_form_id_index")
}

model dynamic_route_wizards {
  id             BigInt         @id @default(autoincrement())
  route_id       BigInt
  wizard_id      BigInt
  inserted_at    DateTime       @db.Timestamp(0)
  updated_at     DateTime       @db.Timestamp(0)
  dynamic_routes dynamic_routes @relation(fields: [route_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  form_wizards   form_wizards   @relation(fields: [wizard_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([route_id, wizard_id], map: "dynamic_route_wizards_route_id_wizard_id_index")
  @@index([route_id], map: "dynamic_route_wizards_route_id_index")
  @@index([wizard_id], map: "dynamic_route_wizards_wizard_id_index")
}

model dynamic_routes {
  id                    BigInt                  @id @default(autoincrement())
  name                  String                  @db.VarChar(255)
  method                String                  @db.VarChar(255)
  path                  String                  @db.VarChar(255)
  enabled               Boolean                 @default(true)
  parts                 String[]                @db.VarChar(255)
  flat_parts            String[]                @db.VarChar(255)
  inserted_at           DateTime                @db.Timestamp(0)
  updated_at            DateTime                @db.Timestamp(0)
  category              String?                 @db.VarChar(255)
  group_name            String?                 @db.VarChar(255)
  priority              Int?                    @default(0)
  tags                  String[]                @default([]) @db.VarChar(255)
  description           String?
  context_id            BigInt?
  api_endpoints         api_endpoints[]
  dynamic_route_forms   dynamic_route_forms[]
  dynamic_route_wizards dynamic_route_wizards[]
  mobile_form_contexts  mobile_form_contexts?   @relation(fields: [context_id], references: [id], onUpdate: NoAction)
  route_process_links   route_process_links[]

  @@unique([method, path], map: "dynamic_routes_method_path_index")
  @@index([category], map: "dynamic_routes_category_index")
  @@index([context_id], map: "dynamic_routes_context_id_index")
  @@index([group_name], map: "dynamic_routes_group_name_index")
  @@index([priority], map: "dynamic_routes_priority_index")
}

model email_notifications {
  id          BigInt    @id @default(autoincrement())
  user_id     Int
  status      String    @db.VarChar(255)
  sent_at     DateTime? @db.Timestamp(0)
  inserted_at DateTime  @db.Timestamp(0)
  updated_at  DateTime  @db.Timestamp(0)

  @@index([user_id], map: "email_notifications_user_id_index")
}

model exchange_rates {
  id                 BigInt   @id @default(autoincrement())
  from_currency_code String?  @db.VarChar(255)
  to_currency_code   String?  @db.VarChar(255)
  rate               Decimal? @db.Decimal
  inserted_at        DateTime @db.Timestamp(0)
  updated_at         DateTime @db.Timestamp(0)
}

model feature_flags {
  id            BigInt   @id @default(autoincrement())
  name          String   @db.VarChar(255)
  description   String?  @db.VarChar(255)
  category      String   @db.VarChar(255)
  enabled       Boolean  @default(false)
  default_value String?  @db.VarChar(255)
  value         String?  @db.VarChar(255)
  registered    Boolean  @default(false)
  value_type    String   @default("boolean") @db.VarChar(255)
  inserted_at   DateTime @db.Timestamp(0)
  updated_at    DateTime @db.Timestamp(0)
  node_name     String   @default("nonode@nohost") @db.VarChar(255)

  @@unique([name, node_name], map: "feature_flags_name_node_index")
  @@index([category], map: "feature_flags_category_index")
  @@index([value_type], map: "feature_flags_value_type_index")
}

model fees_and_charges {
  id                       BigInt    @id @default(autoincrement())
  code                     String?   @db.VarChar(255)
  name                     String?   @db.VarChar(255)
  description              String?
  amount                   Decimal?  @default(0.0) @db.Decimal
  currency_code            String?   @db.VarChar(255)
  charge_type              String?   @db.VarChar(255)
  effective_date           DateTime? @db.Date
  expiration_date          DateTime? @db.Date
  is_feature               Boolean   @default(false)
  status                   String?   @db.VarChar(255)
  created_by               Int?
  updated_by               Int?
  inserted_at              DateTime  @db.Timestamp(0)
  updated_at               DateTime  @db.Timestamp(0)
  category                 String?   @db.VarChar(255)
  calculation_method       String?   @db.VarChar(255)
  percentage_rate          Decimal?  @db.Decimal
  account_type             String?   @db.VarChar(255)
  notification_enabled     Boolean?  @default(false)
  notification_days_before Int?
  comparison_data          Json?
  min_amount               Decimal?  @db.Decimal
  max_amount               Decimal?  @db.Decimal
  frequency                String?   @db.VarChar(255)
  application_time         String?   @db.VarChar(255)
  transaction_type         String?   @db.VarChar(255)
  conditions               Json?
  exchange_rate_source     String?   @db.VarChar(255)

  @@index([account_type], map: "fees_and_charges_account_type_index")
  @@index([category], map: "fees_and_charges_category_index")
  @@index([transaction_type], map: "fees_and_charges_transaction_type_index")
}

model finch_requests {
  id          BigInt   @id @default(autoincrement())
  method      String   @db.VarChar(255)
  url         String   @db.VarChar(255)
  headers     Json?
  options     Json?
  status      String?  @default("pending") @db.VarChar(255)
  inserted_at DateTime @db.Timestamp(0)
  updated_at  DateTime @db.Timestamp(0)
  name        String?  @db.VarChar(255)
  reference   String?  @db.VarChar(255)
  response    Json?
  body        Json?    @default("{}")

  @@index([reference], map: "finch_requests_reference_index")
  @@index([status], map: "finch_requests_status_index")
}

model form_wizard_step_data_mappings {
  id                    BigInt                @id @default(autoincrement())
  wizard_step_id        BigInt
  target_field_id       String                @db.Uuid
  source_step_number    Int
  source_json_path      String                @db.VarChar(255)
  active                Boolean               @default(true)
  inserted_at           DateTime              @db.Timestamp(0)
  updated_at            DateTime              @db.Timestamp(0)
  mobile_form_fields_v2 mobile_form_fields_v2 @relation(fields: [target_field_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  form_wizard_steps     form_wizard_steps     @relation(fields: [wizard_step_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([wizard_step_id, target_field_id], map: "form_wizard_step_data_mappings_unique_target_field")
  @@index([source_step_number], map: "form_wizard_step_data_mappings_source_step_number_index")
  @@index([target_field_id], map: "form_wizard_step_data_mappings_target_field_id_index")
  @@index([wizard_step_id], map: "form_wizard_step_data_mappings_wizard_step_id_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model form_wizard_steps {
  id                             BigInt                           @id @default(autoincrement())
  step_number                    Int
  wizard_id                      BigInt
  form_id                        Int?
  conditions                     Json?
  branching_rules                Json?
  next_step_id                   BigInt?
  inserted_at                    DateTime                         @db.Timestamp(0)
  updated_at                     DateTime                         @db.Timestamp(0)
  mobile_form_id                 String?                          @db.Uuid
  step_type                      String                           @default("form") @db.VarChar(255)
  dynamic_process_id             Int?
  form_wizard_step_data_mappings form_wizard_step_data_mappings[]
// dynamic_forms                  dynamic_forms?                   @relation(fields: [form_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  mobile_forms_v2                mobile_forms_v2?                 @relation(fields: [mobile_form_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  form_wizard_steps              form_wizard_steps?               @relation("form_wizard_stepsToform_wizard_steps", fields: [next_step_id], references: [id], onUpdate: NoAction)
  other_form_wizard_steps        form_wizard_steps[]              @relation("form_wizard_stepsToform_wizard_steps")
  form_wizards                   form_wizards                     @relation(fields: [wizard_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  wizard_sessions                wizard_sessions[]
  wizard_triggers                wizard_triggers[]

  @@unique([wizard_id, step_number], map: "form_wizard_steps_wizard_id_step_number_index")
  @@index([dynamic_process_id], map: "form_wizard_steps_dynamic_process_id_index")
  @@index([form_id], map: "form_wizard_steps_form_id_index")
  @@index([mobile_form_id], map: "form_wizard_steps_mobile_form_id_index")
  @@index([step_number], map: "form_wizard_steps_step_number_index")
  @@index([step_type], map: "form_wizard_steps_step_type_index")
  @@index([wizard_id], map: "form_wizard_steps_wizard_id_index")
}

model form_wizards {
  id                    BigInt                  @id @default(autoincrement())
  name                  String                  @db.VarChar(255)
  description           String?
  active                Boolean?                @default(true)
  created_by_id         BigInt?
  inserted_at           DateTime                @db.Timestamp(0)
  updated_at            DateTime                @db.Timestamp(0)
  context_id            BigInt?
  dynamic_route_wizards dynamic_route_wizards[]
  form_wizard_steps     form_wizard_steps[]
  mobile_form_contexts  mobile_form_contexts?   @relation(fields: [context_id], references: [id], onUpdate: NoAction)
  tbl_system_users      tbl_system_users?       @relation(fields: [created_by_id], references: [id], onUpdate: NoAction)
  trigger_executions    trigger_executions[]
  wizard_sessions       wizard_sessions[]
  wizard_triggers       wizard_triggers[]

  @@index([active], map: "form_wizards_active_index")
  @@index([context_id], map: "form_wizards_context_id_index")
  @@index([created_by_id], map: "form_wizards_created_by_id_index")
  @@index([name], map: "form_wizards_name_index")
}

model fund_accounts {
  id                                                                     BigInt                @id @default(autoincrement())
  account_number                                                         String                @unique(map: "fund_accounts_account_number_index") @db.VarChar(255)
  balance                                                                Decimal               @db.Decimal(20, 2)
  currency                                                               String                @db.VarChar(255)
  account_type                                                           String                @db.VarChar(255)
  status                                                                 String                @db.VarChar(255)
  last_transaction_date                                                  DateTime?             @db.Timestamp(0)
  user_id                                                                BigInt
  cards_id                                                               BigInt?
  inserted_at                                                            DateTime              @db.Timestamp(0)
  updated_at                                                             DateTime              @db.Timestamp(0)
  is_frozen                                                              Boolean?              @default(false)
  is_hidden                                                              Boolean?              @default(false)
  nickname                                                               String?               @db.VarChar(255)
  email                                                                  String?               @db.VarChar(255)
  bank_name                                                              String?               @default("") @db.VarChar(255)
  bank_code                                                              String?               @default("") @db.VarChar(255)
  branch_code                                                            String?               @default("") @db.VarChar(255)
  enable_alerts                                                          Boolean?              @default(false)
  frozen                                                                 Boolean?              @default(false)
  hidden                                                                 Boolean?              @default(false)
  large_transaction_alert                                                Boolean?              @default(false)
  large_transaction_threshold                                            Decimal?              @default(0) @db.Decimal(20, 2)
  low_balance_alert                                                      Boolean?              @default(false)
  low_balance_threshold                                                  Decimal?              @default(0) @db.Decimal(20, 2)
  suspicous_activity_alert                                               Boolean?              @default(false)
  suspicous_activity_seconds_between_transactions                        Int?                  @default(0)
  working_balance                                                        Decimal?              @default(0) @db.Decimal
  cleared_balance                                                        Decimal?              @default(0) @db.Decimal
  cards_cards_account_idTofund_accounts                                  cards[]               @relation("cards_account_idTofund_accounts")
  cards_fund_accounts_cards_idTocards                                    cards?                @relation("fund_accounts_cards_idTocards", fields: [cards_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  accounts_users                                                         accounts_users        @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  loan_transactions_loan_transactions_from_account_idTofund_accounts     loan_transactions[]   @relation("loan_transactions_from_account_idTofund_accounts")
  loan_transactions_loan_transactions_to_account_idTofund_accounts       loan_transactions[]   @relation("loan_transactions_to_account_idTofund_accounts")
  loans                                                                  loans[]
  transactions_transactions_from_account_idTofund_accounts               transactions[]        @relation("transactions_from_account_idTofund_accounts")
  transactions_transactions_to_account_idTofund_accounts                 transactions[]        @relation("transactions_to_account_idTofund_accounts")
  wallet_transactions_wallet_transactions_from_account_idTofund_accounts wallet_transactions[] @relation("wallet_transactions_from_account_idTofund_accounts")
  wallet_transactions_wallet_transactions_to_account_idTofund_accounts   wallet_transactions[] @relation("wallet_transactions_to_account_idTofund_accounts")

  @@index([user_id], map: "fund_accounts_user_id_index")
}

model fund_requests {
  id                                                       BigInt          @id @default(autoincrement())
  amount                                                   Decimal         @db.Decimal
  status                                                   String          @default("pending") @db.VarChar(255)
  transaction_reference                                    String?         @unique(map: "fund_requests_transaction_reference_index") @db.VarChar(255)
  description                                              String?         @db.VarChar(255)
  receiver_account                                         String          @db.VarChar(255)
  sender_account                                           String          @db.VarChar(255)
  sender_id                                                BigInt?
  receiver_id                                              BigInt?
  inserted_at                                              DateTime        @db.Timestamp(0)
  updated_at                                               DateTime        @db.Timestamp(0)
  accounts_users_fund_requests_receiver_idToaccounts_users accounts_users? @relation("fund_requests_receiver_idToaccounts_users", fields: [receiver_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  accounts_users_fund_requests_sender_idToaccounts_users   accounts_users? @relation("fund_requests_sender_idToaccounts_users", fields: [sender_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([receiver_id], map: "fund_requests_receiver_id_index")
  @@index([sender_id], map: "fund_requests_sender_id_index")
}

model fund_requests_config {
  id                        BigInt   @id @default(autoincrement())
  validate_receiver_account Boolean  @default(true)
  inserted_at               DateTime @db.Timestamp(0)
  updated_at                DateTime @db.Timestamp(0)
}

model image_gallery {
  id                   BigInt                @id @default(autoincrement())
  title                String                @db.VarChar(255)
  description          String?
  alt_text             String?               @db.VarChar(255)
  filename             String                @unique(map: "image_gallery_filename_index") @db.VarChar(255)
  category             String?               @default("general") @db.VarChar(255)
  tags                 String[]              @default([]) @db.VarChar(255)
  image_base64         String?
  image_uri            String?               @db.VarChar(255)
  image_content_type   String?               @db.VarChar(255)
  image_storage_type   String?               @default("base64") @db.VarChar(255)
  image_size_bytes     Int?
  image_width          Int?
  image_height         Int?
  usage_count          Int?                  @default(0)
  last_used_at         DateTime?             @db.Timestamp(0)
  is_public            Boolean?              @default(true)
  status               String?               @default("active") @db.VarChar(255)
  uploaded_by_id       BigInt?
  topic_id             BigInt?
  context_id           BigInt?
  inserted_at          DateTime              @db.Timestamp(0)
  updated_at           DateTime              @db.Timestamp(0)
  mobile_form_contexts mobile_form_contexts? @relation(fields: [context_id], references: [id], onUpdate: NoAction)
  topics               topics?               @relation(fields: [topic_id], references: [id], onUpdate: NoAction)
  tbl_system_users     tbl_system_users?     @relation(fields: [uploaded_by_id], references: [id], onUpdate: NoAction)
  ui_feature_sections  ui_feature_sections[]

  @@index([category], map: "image_gallery_category_index")
  @@index([context_id], map: "image_gallery_context_id_index")
  @@index([is_public], map: "image_gallery_is_public_index")
  @@index([last_used_at], map: "image_gallery_last_used_at_index")
  @@index([status], map: "image_gallery_status_index")
  @@index([topic_id], map: "image_gallery_topic_id_index")
  @@index([uploaded_by_id], map: "image_gallery_uploaded_by_id_index")
  @@index([usage_count], map: "image_gallery_usage_count_index")
}

model integration_response_fields {
  id             BigInt       @id @default(autoincrement())
  integration_id BigInt
  field_name     String       @db.VarChar(255)
  field_path     String       @db.VarChar(255)
  data_type      String?      @default("string") @db.VarChar(255)
  is_required    Boolean?     @default(false)
  sample_value   String?
  description    String?
  inserted_at    DateTime     @db.Timestamp(0)
  updated_at     DateTime     @db.Timestamp(0)
  integrations   integrations @relation(fields: [integration_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([integration_id, field_name], map: "integration_response_fields_integration_id_field_name_index")
  @@index([integration_id], map: "integration_response_fields_integration_id_index")
}

model integration_test_executions {
  id                  BigInt             @id @default(autoincrement())
  integration_id      BigInt
  request_template_id BigInt?
  request_data        Json
  response_data       Json?
  response_status     Int?
  response_headers    Json?              @default("{}")
  execution_time_ms   Int?
  success             Boolean?           @default(false)
  error_message       String?
  executed_by         String?            @db.VarChar(255)
  inserted_at         DateTime           @db.Timestamp(0)
  updated_at          DateTime           @db.Timestamp(0)
  integrations        integrations       @relation(fields: [integration_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  request_templates   request_templates? @relation(fields: [request_template_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([inserted_at], map: "integration_test_executions_inserted_at_index")
  @@index([integration_id], map: "integration_test_executions_integration_id_index")
  @@index([request_template_id], map: "integration_test_executions_request_template_id_index")
  @@index([success], map: "integration_test_executions_success_index")
}

model integrations {
  id                          BigInt                        @id @default(autoincrement())
  name                        String                        @unique(map: "integrations_name_index") @db.VarChar(255)
  description                 String?
  http_method                 String                        @default("POST") @db.VarChar(255)
  endpoint_url                String                        @db.VarChar(255)
  port                        Int?                          @default(80)
  headers                     Json?                         @default("{}")
  retry_count                 Int?                          @default(3)
  is_async                    Boolean?                      @default(false)
  enabled                     Boolean?                      @default(true)
  timeout_ms                  Int?                          @default(30000)
  created_by                  String?                       @db.VarChar(255)
  updated_by                  String?                       @db.VarChar(255)
  inserted_at                 DateTime                      @db.Timestamp(0)
  updated_at                  DateTime                      @db.Timestamp(0)
  request_template_id         BigInt?
  context_id                  BigInt?
  type                        String                        @default("integration") @db.VarChar(255)
  datasource_table            String?                       @db.VarChar(255)
  datasource_value_column     String?                       @db.VarChar(255)
  datasource_label_template   String?
  datasource_label_columns    Json?                         @default("{}")
  user_table                  String?                       @db.VarChar(255)
  user_id_column              String?                       @default("id") @db.VarChar(255)
  schema                      String?                       @db.VarChar(255)
  integration_response_fields integration_response_fields[]
  integration_test_executions integration_test_executions[]
  mobile_form_contexts        mobile_form_contexts?         @relation(fields: [context_id], references: [id], onUpdate: NoAction)
  request_templates           request_templates?            @relation(fields: [request_template_id], references: [id], onUpdate: NoAction)
// mobile_form_fields_v2       mobile_form_fields_v2[]
  trigger_executions          trigger_executions[]
  trigger_integrations        trigger_integrations[]

  @@index([context_id], map: "integrations_context_id_index")
  @@index([enabled], map: "integrations_enabled_index")
  @@index([http_method], map: "integrations_http_method_index")
  @@index([request_template_id], map: "integrations_request_template_id_index")
  @@index([type], map: "integrations_type_index")
}

model ip_whitelists {
  id                     BigInt               @id @default(autoincrement())
  ip_address             String               @unique(map: "ip_whitelists_ip_address_index") @db.VarChar(255)
  description            String?              @db.VarChar(255)
  status                 String               @default("active") @db.VarChar(255)
  last_accessed_at       DateTime?            @db.Timestamp(0)
  expiry_date            DateTime?            @db.Timestamp(0)
  access_count           Int                  @default(0)
  risk_level             String               @default("medium") @db.VarChar(255)
  environment            String               @default("production") @db.VarChar(255)
  user_id                BigInt?
  wallet_user_id         BigInt?
  third_party_api_key_id BigInt?
  inserted_at            DateTime             @db.Timestamp(0)
  updated_at             DateTime             @db.Timestamp(0)
  third_party_api_key    third_party_api_key? @relation(fields: [third_party_api_key_id], references: [id], onDelete: Restrict, onUpdate: NoAction)
  accounts_users         accounts_users?      @relation(fields: [user_id], references: [id], onDelete: Restrict, onUpdate: NoAction)
  walletusers            walletusers?         @relation(fields: [wallet_user_id], references: [id], onDelete: Restrict, onUpdate: NoAction)

  @@index([environment], map: "ip_whitelists_environment_index")
  @@index([status], map: "ip_whitelists_status_index")
  @@index([third_party_api_key_id], map: "ip_whitelists_third_party_api_key_id_index")
  @@index([user_id], map: "ip_whitelists_user_id_index")
  @@index([wallet_user_id], map: "ip_whitelists_wallet_user_id_index")
}

model issue_labels {
  id          BigInt   @id @default(autoincrement())
  issue_id    BigInt
  label_id    BigInt
  inserted_at DateTime @db.Timestamp(0)
  updated_at  DateTime @db.Timestamp(0)
  issues      issues   @relation(fields: [issue_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  labels      labels   @relation(fields: [label_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([issue_id, label_id], map: "issue_labels_issue_id_label_id_index")
  @@index([issue_id], map: "issue_labels_issue_id_index")
  @@index([label_id], map: "issue_labels_label_id_index")
}

model issues {
  id                                                    BigInt            @id @default(autoincrement())
  title                                                 String            @db.VarChar(255)
  description                                           String
  status                                                String            @db.VarChar(255)
  priority                                              String            @db.VarChar(255)
  assignee_id                                           BigInt?
  version_id                                            BigInt
  created_by                                            BigInt
  inserted_at                                           DateTime          @db.Timestamp(0)
  updated_at                                            DateTime          @db.Timestamp(0)
  issue_labels                                          issue_labels[]
  tbl_system_users_issues_assignee_idTotbl_system_users tbl_system_users? @relation("issues_assignee_idTotbl_system_users", fields: [assignee_id], references: [id], onUpdate: NoAction)
  tbl_system_users_issues_created_byTotbl_system_users  tbl_system_users  @relation("issues_created_byTotbl_system_users", fields: [created_by], references: [id], onUpdate: NoAction)
  versions                                              versions          @relation(fields: [version_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([assignee_id], map: "issues_assignee_id_index")
  @@index([created_by], map: "issues_created_by_index")
  @@index([priority], map: "issues_priority_index")
  @@index([status], map: "issues_status_index")
  @@index([version_id], map: "issues_version_id_index")
}

/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model labels {
  id           BigInt         @id @default(autoincrement())
  name         String         @db.VarChar(255)
  color        String         @db.VarChar(255)
  inserted_at  DateTime       @db.Timestamp(0)
  updated_at   DateTime       @db.Timestamp(0)
  issue_labels issue_labels[]
}

model loan_applications {
  id             BigInt         @id @default(autoincrement())
  amount         Decimal        @db.Decimal(18, 2)
  duration       Int
  status         String         @db.VarChar(255)
  user_id        BigInt
  product_id     BigInt
  inserted_at    DateTime       @db.Timestamp(0)
  updated_at     DateTime       @db.Timestamp(0)
  loan_products  loan_products  @relation(fields: [product_id], references: [id], onUpdate: NoAction)
  accounts_users accounts_users @relation(fields: [user_id], references: [id], onUpdate: NoAction)

  @@index([product_id], map: "loan_applications_product_id_index")
  @@index([user_id], map: "loan_applications_user_id_index")
}

model loan_charges {
  id                 BigInt        @id @default(autoincrement())
  amount             Decimal       @db.Decimal(10, 2)
  description        String?       @db.VarChar(255)
  status             String        @db.VarChar(255)
  status_description String?       @db.VarChar(255)
  reference          String?       @db.VarChar(255)
  value_date         DateTime?     @db.Date
  transaction_date   DateTime?     @db.Timestamp(0)
  payment_method     String?       @db.VarChar(255)
  external_reference String?       @db.VarChar(255)
  debit_account      String        @db.VarChar(255)
  credit_account     String        @db.VarChar(255)
  loan_id            BigInt
  product_id         BigInt
  inserted_at        DateTime      @db.Timestamp(0)
  updated_at         DateTime      @db.Timestamp(0)
  loans              loans         @relation(fields: [loan_id], references: [id], onUpdate: NoAction)
  loan_products      loan_products @relation(fields: [product_id], references: [id], onUpdate: NoAction)

  @@index([credit_account], map: "loan_charges_credit_account_index")
  @@index([debit_account], map: "loan_charges_debit_account_index")
  @@index([loan_id], map: "loan_charges_loan_id_index")
  @@index([product_id], map: "loan_charges_product_id_index")
}

model loan_customer_batch {
  id                                                                BigInt            @id @default(autoincrement())
  batch_reference                                                   String            @unique(map: "loan_customer_batch_batch_reference_index") @db.VarChar(255)
  filename                                                          String            @db.VarChar(255)
  status                                                            String            @default("PENDING") @db.VarChar(255)
  valid_count                                                       Int               @default(0)
  invalid_count                                                     Int               @default(0)
  item_count                                                        Int               @default(0)
  partner_id                                                        BigInt
  inserted_at                                                       DateTime          @db.Timestamp(0)
  updated_at                                                        DateTime          @db.Timestamp(0)
  maker_id                                                          BigInt
  checker_id                                                        BigInt?
  tbl_system_users_loan_customer_batch_checker_idTotbl_system_users tbl_system_users? @relation("loan_customer_batch_checker_idTotbl_system_users", fields: [checker_id], references: [id], onDelete: Restrict, onUpdate: NoAction)
  tbl_system_users_loan_customer_batch_maker_idTotbl_system_users   tbl_system_users  @relation("loan_customer_batch_maker_idTotbl_system_users", fields: [maker_id], references: [id], onUpdate: NoAction)
  loan_partnerships                                                 loan_partnerships @relation(fields: [partner_id], references: [id], onUpdate: NoAction)

  @@index([checker_id], map: "loan_customer_batch_checker_id_index")
  @@index([maker_id], map: "loan_customer_batch_maker_id_index")
  @@index([partner_id], map: "loan_customer_batch_partner_id_index")
}

model loan_customers {
  id                                                           BigInt            @id @default(autoincrement())
  first_name                                                   String?           @db.VarChar(255)
  last_name                                                    String?           @db.VarChar(255)
  email                                                        String?           @db.VarChar(255)
  phone                                                        String?           @db.VarChar(255)
  status                                                       String?           @db.VarChar(255)
  account_number                                               String?           @db.VarChar(255)
  account_type                                                 String?           @db.VarChar(255)
  ref_id                                                       String            @db.VarChar(255)
  eligibility_status                                           String            @db.VarChar(255)
  max_loan_amount                                              Decimal           @db.Decimal(18, 2)
  last_eligibility_check                                       DateTime          @db.Timestamp(0)
  customer_id                                                  BigInt
  product_id                                                   BigInt
  partner_id                                                   BigInt
  inserted_at                                                  DateTime          @db.Timestamp(0)
  updated_at                                                   DateTime          @db.Timestamp(0)
  maker_id                                                     BigInt
  checker_id                                                   BigInt?
  tbl_system_users_loan_customers_checker_idTotbl_system_users tbl_system_users? @relation("loan_customers_checker_idTotbl_system_users", fields: [checker_id], references: [id], onDelete: Restrict, onUpdate: NoAction)
  accounts_users                                               accounts_users    @relation(fields: [customer_id], references: [id], onUpdate: NoAction)
  tbl_system_users_loan_customers_maker_idTotbl_system_users   tbl_system_users  @relation("loan_customers_maker_idTotbl_system_users", fields: [maker_id], references: [id], onUpdate: NoAction)
  loan_partnerships                                            loan_partnerships @relation(fields: [partner_id], references: [id], onUpdate: NoAction)
  loan_products                                                loan_products     @relation(fields: [product_id], references: [id], onUpdate: NoAction)
  loans                                                        loans[]

  @@index([checker_id], map: "loan_customers_checker_id_index")
  @@index([customer_id], map: "loan_customers_customer_id_index")
  @@index([maker_id], map: "loan_customers_maker_id_index")
  @@index([partner_id], map: "loan_customers_partner_id_index")
  @@index([product_id], map: "loan_customers_product_id_index")
  @@index([ref_id], map: "loan_customers_ref_id_index")
}

model loan_partnerships {
  id                                                              BigInt                @id @default(autoincrement())
  name                                                            String                @db.VarChar(255)
  description                                                     String?               @db.VarChar(255)
  partner_type                                                    String                @db.VarChar(255)
  contact_person                                                  String                @db.VarChar(255)
  contact_email                                                   String                @db.VarChar(255)
  contact_phone                                                   String                @db.VarChar(255)
  partnership_start_date                                          DateTime              @db.Date
  partnership_end_date                                            DateTime?             @db.Date
  status                                                          String                @db.VarChar(255)
  inserted_at                                                     DateTime              @db.Timestamp(0)
  updated_at                                                      DateTime              @db.Timestamp(0)
  maker_id                                                        BigInt
  checker_id                                                      BigInt?
  loan_customer_batch                                             loan_customer_batch[]
  loan_customers                                                  loan_customers[]
  tbl_system_users_loan_partnerships_checker_idTotbl_system_users tbl_system_users?     @relation("loan_partnerships_checker_idTotbl_system_users", fields: [checker_id], references: [id], onDelete: Restrict, onUpdate: NoAction)
  tbl_system_users_loan_partnerships_maker_idTotbl_system_users   tbl_system_users      @relation("loan_partnerships_maker_idTotbl_system_users", fields: [maker_id], references: [id], onUpdate: NoAction)

  @@index([checker_id], map: "loan_partnerships_checker_id_index")
  @@index([maker_id], map: "loan_partnerships_maker_id_index")
  @@index([status], map: "loan_partnerships_status_index")
}

model loan_products {
  id                                                          BigInt              @id @default(autoincrement())
  name                                                        String              @db.VarChar(255)
  description                                                 String?             @db.VarChar(255)
  min_amount                                                  Decimal             @db.Decimal(18, 2)
  max_amount                                                  Decimal             @db.Decimal(18, 2)
  interest_rate                                               Decimal             @db.Decimal(5, 2)
  default_duration                                            Int
  is_active                                                   Boolean             @default(true)
  inserted_at                                                 DateTime            @db.Timestamp(0)
  updated_at                                                  DateTime            @db.Timestamp(0)
  maker_id                                                    BigInt
  checker_id                                                  BigInt?
  loan_account                                                String?             @db.VarChar(255)
  collection_account                                          String?             @db.VarChar(255)
  charge_type                                                 String?             @db.VarChar(255)
  charge_rate                                                 Decimal?            @db.Decimal(18, 2)
  charge_account                                              String?             @db.VarChar(255)
  loan_applications                                           loan_applications[]
  loan_charges                                                loan_charges[]
  loan_customers                                              loan_customers[]
  tbl_system_users_loan_products_checker_idTotbl_system_users tbl_system_users?   @relation("loan_products_checker_idTotbl_system_users", fields: [checker_id], references: [id], onDelete: Restrict, onUpdate: NoAction)
  tbl_system_users_loan_products_maker_idTotbl_system_users   tbl_system_users    @relation("loan_products_maker_idTotbl_system_users", fields: [maker_id], references: [id], onUpdate: NoAction)
  loan_terms                                                  loan_terms[]
  loans                                                       loans[]

  @@index([charge_account], map: "loan_products_charge_account_index")
  @@index([checker_id], map: "loan_products_checker_id_index")
  @@index([collection_account], map: "loan_products_collection_account_index")
  @@index([is_active], map: "loan_products_is_active_index")
  @@index([loan_account], map: "loan_products_loan_account_index")
  @@index([maker_id], map: "loan_products_maker_id_index")
}

model loan_terms {
  id                                                       BigInt            @id @default(autoincrement())
  amount                                                   Decimal           @db.Decimal(18, 2)
  interest_rate                                            Decimal           @db.Decimal(18, 2)
  duration                                                 Int
  total_repayment                                          Decimal           @db.Decimal(18, 2)
  customer_id                                              BigInt
  product_id                                               BigInt
  inserted_at                                              DateTime          @db.Timestamp(0)
  updated_at                                               DateTime          @db.Timestamp(0)
  maker_id                                                 BigInt?
  checker_id                                               BigInt?
  charge_amount                                            Decimal?          @db.Decimal(18, 2)
  disbursed_amount                                         Decimal?          @db.Decimal(18, 2)
  tbl_system_users_loan_terms_checker_idTotbl_system_users tbl_system_users? @relation("loan_terms_checker_idTotbl_system_users", fields: [checker_id], references: [id], onDelete: Restrict, onUpdate: NoAction)
  accounts_users                                           accounts_users    @relation(fields: [customer_id], references: [id], onUpdate: NoAction)
  tbl_system_users_loan_terms_maker_idTotbl_system_users   tbl_system_users? @relation("loan_terms_maker_idTotbl_system_users", fields: [maker_id], references: [id], onDelete: Restrict, onUpdate: NoAction)
  loan_products                                            loan_products     @relation(fields: [product_id], references: [id], onUpdate: NoAction)

  @@index([checker_id], map: "loan_terms_checker_id_index")
  @@index([customer_id], map: "loan_terms_customer_id_index")
  @@index([maker_id], map: "loan_terms_maker_id_index")
  @@index([product_id], map: "loan_terms_product_id_index")
}

model loan_transactions {
  id                                                             BigInt         @id @default(autoincrement())
  type                                                           String         @db.VarChar(255)
  amount                                                         Decimal        @db.Decimal(10, 2)
  opening_balance                                                Decimal?       @db.Decimal(10, 2)
  closing_balance                                                Decimal?       @db.Decimal(10, 2)
  description                                                    String?        @db.VarChar(255)
  status                                                         String         @db.VarChar(255)
  status_description                                             String?        @db.VarChar(255)
  reference                                                      String?        @db.VarChar(255)
  value_date                                                     DateTime       @db.Date
  transaction_date                                               DateTime       @db.Timestamp(0)
  payment_method                                                 String?        @db.VarChar(255)
  external_reference                                             String?        @db.VarChar(255)
  debit_account                                                  String         @db.VarChar(255)
  credit_account                                                 String         @db.VarChar(255)
  from_account_id                                                BigInt?
  to_account_id                                                  BigInt?
  loan_id                                                        BigInt
  inserted_at                                                    DateTime       @db.Timestamp(0)
  updated_at                                                     DateTime       @db.Timestamp(0)
  fund_accounts_loan_transactions_from_account_idTofund_accounts fund_accounts? @relation("loan_transactions_from_account_idTofund_accounts", fields: [from_account_id], references: [id], onDelete: Restrict, onUpdate: NoAction)
  loans                                                          loans          @relation(fields: [loan_id], references: [id], onUpdate: NoAction)
  fund_accounts_loan_transactions_to_account_idTofund_accounts   fund_accounts? @relation("loan_transactions_to_account_idTofund_accounts", fields: [to_account_id], references: [id], onDelete: Restrict, onUpdate: NoAction)

  @@index([from_account_id], map: "loan_transactions_from_account_id_index")
  @@index([loan_id], map: "loan_transactions_loan_id_index")
  @@index([to_account_id], map: "loan_transactions_to_account_id_index")
}

model loans {
  id                BigInt              @id @default(autoincrement())
  amount            Decimal             @db.Decimal(18, 2)
  interest_rate     Decimal             @db.Decimal(18, 2)
  duration          Int
  total_repayment   Decimal             @db.Decimal(18, 2)
  repaid_amount     Decimal             @default(0) @db.Decimal(18, 2)
  remaining_balance Decimal             @default(0) @db.Decimal(18, 2)
  status            String              @db.VarChar(255)
  repayment_status  String              @db.VarChar(255)
  account_type      String              @db.VarChar(255)
  account_number    String              @db.VarChar(255)
  user_id           BigInt
  bank_account_id   BigInt
  product_id        BigInt
  inserted_at       DateTime            @db.Timestamp(0)
  updated_at        DateTime            @db.Timestamp(0)
  customer_id       BigInt?
  charge_amount     Decimal?            @db.Decimal(18, 2)
  disbursed_amount  Decimal?            @db.Decimal(18, 2)
  loan_charges      loan_charges[]
  loan_transactions loan_transactions[]
  fund_accounts     fund_accounts       @relation(fields: [bank_account_id], references: [id], onUpdate: NoAction)
  loan_customers    loan_customers?     @relation(fields: [customer_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  loan_products     loan_products       @relation(fields: [product_id], references: [id], onUpdate: NoAction)
  accounts_users    accounts_users      @relation(fields: [user_id], references: [id], onUpdate: NoAction)

  @@index([account_number], map: "loans_account_number_index")
  @@index([bank_account_id], map: "loans_bank_account_id_index")
  @@index([product_id], map: "loans_product_id_index")
  @@index([status], map: "loans_status_index")
  @@index([user_id], map: "loans_user_id_index")
}

model log_entries {
  id            BigInt   @id @default(autoincrement())
  chain_id      String   @db.VarChar(255)
  function_name String   @db.VarChar(255)
  module_name   String   @db.VarChar(255)
  process_id    String   @db.VarChar(255)
  duration_ms   Int?
  params        String?
  result        String?
  process_state String?
  request_info  String?
  response_info String?
  timestamp     DateTime @db.Timestamp(0)
  inserted_at   DateTime @db.Timestamp(0)
  updated_at    DateTime @db.Timestamp(0)
  file_path     String?  @db.VarChar(255)
  raw_log       String?
}

model merchant_transactions {
  id                BigInt    @id @default(autoincrement())
  merchant_id       BigInt
  transaction_id    String    @unique(map: "merchant_transactions_transaction_id_index") @db.VarChar(255)
  amount            Decimal   @db.Decimal(20, 2)
  currency          String    @db.VarChar(255)
  qr_code_data      String?   @db.VarChar(255)
  description       String?   @db.VarChar(255)
  callback_url      String?   @db.VarChar(255)
  status            String    @default("pending") @db.VarChar(255)
  callback_status   String?   @db.VarChar(255)
  callback_response String?
  inserted_at       DateTime  @db.Timestamp(0)
  updated_at        DateTime  @db.Timestamp(0)
  callback_sent     Boolean   @default(false)
  merchants         merchants @relation(fields: [merchant_id], references: [id], onUpdate: NoAction)

  @@index([callback_sent], map: "merchant_transactions_callback_sent_index")
  @@index([merchant_id], map: "merchant_transactions_merchant_id_index")
  @@index([status], map: "merchant_transactions_status_index")
}

model merchants {
  id                    BigInt                  @id @default(autoincrement())
  name                  String                  @db.VarChar(255)
  email                 String?                 @unique(map: "merchants_email_index") @db.VarChar(255)
  address               String?                 @db.VarChar(255)
  phone_number          String?                 @db.VarChar(255)
  is_active             Boolean                 @default(true)
  merchant_code         String                  @unique(map: "merchants_merchant_code_index") @db.VarChar(255)
  inserted_at           DateTime                @db.Timestamp(0)
  updated_at            DateTime                @db.Timestamp(0)
  balance               Float?                  @default(0.0)
  merchant_transactions merchant_transactions[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model messages {
  id               BigInt           @id @default(autoincrement())
  content          String
  messageable_type String           @db.VarChar(255)
  messageable_id   BigInt
  user_id          BigInt
  parent_id        BigInt?
  inserted_at      DateTime         @db.Timestamp(0)
  updated_at       DateTime         @db.Timestamp(0)
  type             String?          @db.VarChar(255)
  messages         messages?        @relation("messagesTomessages", fields: [parent_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  other_messages   messages[]       @relation("messagesTomessages")
  tbl_system_users tbl_system_users @relation(fields: [user_id], references: [id], onUpdate: NoAction)

  @@index([messageable_type, messageable_id], map: "messages_messageable_type_messageable_id_index")
  @@index([parent_id], map: "messages_parent_id_index")
  @@index([type], map: "messages_type_index")
  @@index([user_id], map: "messages_user_id_index")
}

model mobile_app_form_defs {
  id          String   @id @db.Uuid
  form        String   @db.VarChar(255)
  screen      String?  @db.VarChar(255)
  page        String?  @db.VarChar(255)
  version     String   @db.VarChar(255)
  submit_to   String?  @db.VarChar(255)
  active      Boolean  @default(true)
  inserted_at DateTime @db.Timestamp(0)
  updated_at  DateTime @db.Timestamp(0)

  @@unique([form, screen, page, version], map: "mobile_app_form_defs_unique_form_scope")
  @@index([active], map: "mobile_app_form_defs_active_index")
  @@index([form], map: "mobile_app_form_defs_form_index")
  @@index([page], map: "mobile_app_form_defs_page_index")
  @@index([screen], map: "mobile_app_form_defs_screen_index")
  @@index([version], map: "mobile_app_form_defs_version_index")
}

model mobile_app_forms {
  field_id    String   @id @db.Uuid
  form        String   @db.VarChar(255)
  screen      String?  @db.VarChar(255)
  page        String?  @db.VarChar(255)
  version     String   @db.VarChar(255)
  field_name  String   @db.VarChar(255)
  field_type  String   @db.VarChar(255)
  label       String   @db.VarChar(255)
  is_required Boolean  @default(false)
  field_order Int      @default(0)
  active      Boolean  @default(true)
  inserted_at DateTime @db.Timestamp(0)
  updated_at  DateTime @db.Timestamp(0)
  submit_to   String?  @db.VarChar(255)

  @@unique([form, screen, page, field_name, version], map: "mobile_app_forms_unique_field_constraint")
  @@index([active], map: "mobile_app_forms_active_index")
  @@index([field_order], map: "mobile_app_forms_field_order_index")
  @@index([form], map: "mobile_app_forms_form_index")
  @@index([form, screen], map: "mobile_app_forms_form_screen_index")
  @@index([form, screen, page], map: "mobile_app_forms_form_screen_page_index")
  @@index([form, version], map: "mobile_app_forms_form_version_index")
  @@index([submit_to], map: "mobile_app_forms_submit_to_index")
}

model mobile_form_contexts {
  id                      BigInt                    @id @default(autoincrement())
  name                    String                    @unique(map: "mobile_form_contexts_name_index") @db.VarChar(255)
  description             String?
  color                   String?                   @default("#3B82F6") @db.VarChar(255)
  active                  Boolean?                  @default(true)
  created_by_id           BigInt?
  inserted_at             DateTime                  @db.Timestamp(0)
  updated_at              DateTime                  @db.Timestamp(0)
  api_endpoints           api_endpoints[]
  api_schemas             api_schemas[]
  custom_tables           custom_tables[]
  dynamic_forms           dynamic_forms[]
  dynamic_processes       dynamic_processes[]
  dynamic_routes          dynamic_routes[]
  form_wizards            form_wizards[]
  image_gallery           image_gallery[]
  integrations            integrations[]
  tbl_system_users        tbl_system_users?         @relation(fields: [created_by_id], references: [id], onUpdate: NoAction)
  mobile_form_fields_v2   mobile_form_fields_v2[]
  mobile_form_groups      mobile_form_groups[]
  mobile_forms_v2         mobile_forms_v2[]
  mobile_pages            mobile_pages[]
  mobile_screens          mobile_screens[]
  request_templates       request_templates[]
  triggers                triggers[]
  ui_features             ui_features[]
  user_context_selections user_context_selections[]

  @@index([active], map: "mobile_form_contexts_active_index")
  @@index([created_by_id], map: "mobile_form_contexts_created_by_id_index")
}

model mobile_form_fields_v2 {
  id                             String                           @id @db.Uuid
  form_id                        String                           @db.Uuid
  field_name                     String                           @db.VarChar(255)
  field_type                     String                           @db.VarChar(255)
  label                          String                           @db.VarChar(255)
  is_required                    Boolean                          @default(false)
  field_order                    Int                              @default(0)
  active                         Boolean                          @default(true)
  inserted_at                    DateTime                         @db.Timestamp(0)
  updated_at                     DateTime                         @db.Timestamp(0)
  options                        String?
  data_source                    String?                          @db.VarChar(255)
  data_source_format             String?                          @db.VarChar(255)
  integration_id                 Int?
  context_id                     BigInt?
  form_wizard_step_data_mappings form_wizard_step_data_mappings[]
  mobile_form_contexts           mobile_form_contexts?            @relation(fields: [context_id], references: [id], onUpdate: NoAction)
  mobile_forms_v2                mobile_forms_v2                  @relation(fields: [form_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
// integrations                   integrations?                    @relation(fields: [integration_id], references: [id], onUpdate: NoAction)

  @@unique([form_id, field_name], map: "mobile_form_fields_v2_unique_form_field")
  @@index([active], map: "mobile_form_fields_v2_active_index")
  @@index([context_id], map: "mobile_form_fields_v2_context_id_index")
  @@index([field_order], map: "mobile_form_fields_v2_field_order_index")
  @@index([form_id], map: "mobile_form_fields_v2_form_id_index")
}

model mobile_form_groups {
  id                   String                @id @db.Uuid
  name                 String                @db.VarChar(255)
  description          String?               @db.VarChar(255)
  order                Int?                  @default(0)
  active               Boolean?              @default(true)
  context_id           BigInt?
  inserted_at          DateTime              @db.Timestamp(0)
  updated_at           DateTime              @db.Timestamp(0)
  mobile_form_contexts mobile_form_contexts? @relation(fields: [context_id], references: [id], onUpdate: NoAction)
  mobile_forms_v2      mobile_forms_v2[]

  @@unique([name, context_id], map: "mobile_form_groups_unique_name_context")
  @@index([context_id], map: "mobile_form_groups_context_id_index")
}

model mobile_form_validation_links {
  id              String          @id @db.Uuid
  mobile_form_id  String          @db.Uuid
  dynamic_form_id BigInt
  inserted_at     DateTime        @db.Timestamp(0)
  updated_at      DateTime        @db.Timestamp(0)
  dynamic_forms   dynamic_forms   @relation(fields: [dynamic_form_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  mobile_forms_v2 mobile_forms_v2 @relation(fields: [mobile_form_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([mobile_form_id, dynamic_form_id], map: "unique_mobile_form_validation_link")
  @@index([dynamic_form_id], map: "mobile_form_validation_links_dynamic_form_id_index")
  @@index([mobile_form_id], map: "mobile_form_validation_links_mobile_form_id_index")
}

model mobile_forms_v2 {
  id                           String                         @id @db.Uuid
  page_id                      String                         @db.Uuid
  name                         String                         @db.VarChar(255)
  order                        Int                            @default(0)
  active                       Boolean                        @default(true)
  submit_to                    String?                        @db.VarChar(255)
  inserted_at                  DateTime                       @db.Timestamp(0)
  updated_at                   DateTime                       @db.Timestamp(0)
  route_id                     String?                        @db.VarChar(255)
  app_view                     Boolean                        @default(true)
  value                        String?                        @db.VarChar(255)
  type                         String?                        @db.VarChar(255)
  prompt_question              String?
  prompt_answer                String?                        @db.VarChar(255)
  next_step_button_text        String?                        @db.VarChar(255)
  previous_step_button_text    String?                        @db.VarChar(255)
  context_id                   BigInt?
  group_id                     String?                        @db.Uuid
  form_wizard_steps            form_wizard_steps[]
  mobile_form_fields_v2        mobile_form_fields_v2[]
  mobile_form_validation_links mobile_form_validation_links[]
  mobile_form_contexts         mobile_form_contexts?          @relation(fields: [context_id], references: [id], onUpdate: NoAction)
  mobile_form_groups           mobile_form_groups?            @relation(fields: [group_id], references: [id], onUpdate: NoAction)
  mobile_pages                 mobile_pages                   @relation(fields: [page_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([page_id, name], map: "mobile_forms_v2_unique_page_name")
  @@index([active], map: "mobile_forms_v2_active_index")
  @@index([context_id], map: "mobile_forms_v2_context_id_index")
  @@index([group_id], map: "mobile_forms_v2_group_id_index")
  @@index([order], map: "mobile_forms_v2_order_index")
  @@index([page_id], map: "mobile_forms_v2_page_id_index")
  @@index([route_id], map: "mobile_forms_v2_route_id_index")
  @@index([submit_to], map: "mobile_forms_v2_submit_to_index")
}

model mobile_pages {
  id                   String                @id @db.Uuid
  screen_id            String                @db.Uuid
  name                 String                @db.VarChar(255)
  order                Int                   @default(0)
  active               Boolean               @default(true)
  inserted_at          DateTime              @db.Timestamp(0)
  updated_at           DateTime              @db.Timestamp(0)
  context_id           BigInt?
  mobile_forms_v2      mobile_forms_v2[]
  mobile_form_contexts mobile_form_contexts? @relation(fields: [context_id], references: [id], onUpdate: NoAction)
  mobile_screens       mobile_screens        @relation(fields: [screen_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([screen_id, name], map: "mobile_pages_unique_screen_name")
  @@index([active], map: "mobile_pages_active_index")
  @@index([context_id], map: "mobile_pages_context_id_index")
  @@index([order], map: "mobile_pages_order_index")
  @@index([screen_id], map: "mobile_pages_screen_id_index")
}

model mobile_screens {
  id                   String                @id @db.Uuid
  name                 String                @db.VarChar(255)
  version              String                @db.VarChar(255)
  order                Int                   @default(0)
  active               Boolean               @default(true)
  inserted_at          DateTime              @db.Timestamp(0)
  updated_at           DateTime              @db.Timestamp(0)
  context_id           BigInt?
  mobile_pages         mobile_pages[]
  mobile_form_contexts mobile_form_contexts? @relation(fields: [context_id], references: [id], onUpdate: NoAction)

  @@unique([name, version], map: "mobile_screens_unique_name_version")
  @@index([active], map: "mobile_screens_active_index")
  @@index([context_id], map: "mobile_screens_context_id_index")
  @@index([order], map: "mobile_screens_order_index")
}

model notification_logs {
  id                BigInt   @id @default(autoincrement())
  notification_type String   @db.VarChar(255)
  notification_id   Int
  user_id           Int
  status            String   @db.VarChar(255)
  logged_at         DateTime @db.Timestamp(0)
  inserted_at       DateTime @db.Timestamp(0)
  updated_at        DateTime @db.Timestamp(0)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model oban_jobs {
  id           BigInt         @id @default(autoincrement())
  state        oban_job_state @default(available)
  queue        String         @default("default")
  worker       String
  args         Json           @default("{}")
  errors       Json[]         @default([])
  attempt      Int            @default(0)
  max_attempts Int            @default(20)
  inserted_at  DateTime       @default(dbgenerated("timezone('UTC'::text, now())")) @db.Timestamp(6)
  scheduled_at DateTime       @default(dbgenerated("timezone('UTC'::text, now())")) @db.Timestamp(6)
  attempted_at DateTime?      @db.Timestamp(6)
  completed_at DateTime?      @db.Timestamp(6)
  attempted_by String[]
  discarded_at DateTime?      @db.Timestamp(6)
  priority     Int            @default(0)
  tags         String[]       @default([])
  meta         Json?          @default("{}")
  cancelled_at DateTime?      @db.Timestamp(6)

  @@index([args], map: "oban_jobs_args_index", type: Gin)
  @@index([meta], map: "oban_jobs_meta_index", type: Gin)
  @@index([state, queue, priority, scheduled_at, id], map: "oban_jobs_state_queue_priority_scheduled_at_id_index")
}

model oban_peers {
  name       String   @id
  node       String
  started_at DateTime @db.Timestamp(6)
  expires_at DateTime @db.Timestamp(6)
}

model payment_methods {
  id          BigInt   @id @default(autoincrement())
  name        String?  @db.VarChar(255)
  type        String?  @db.VarChar(255)
  description String?
  status      String   @default("inactive") @db.VarChar(255)
  fees_id     Int?
  created_by  Int?
  updated_by  Int?
  inserted_at DateTime @db.Timestamp(0)
  updated_at  DateTime @db.Timestamp(0)
}

model process_chain_links {
  id                                                                         BigInt            @id @default(autoincrement())
  source_process_id                                                          BigInt
  target_process_id                                                          BigInt
  position                                                                   Int               @default(0)
  created_by_id                                                              BigInt?
  inserted_at                                                                DateTime          @db.Timestamp(0)
  updated_at                                                                 DateTime          @db.Timestamp(0)
  is_root                                                                    Boolean           @default(false)
  chain_id                                                                   String?           @db.Uuid
  order_position                                                             Int               @default(0)
  tbl_system_users                                                           tbl_system_users? @relation(fields: [created_by_id], references: [id], onUpdate: NoAction)
  dynamic_processes_process_chain_links_source_process_idTodynamic_processes dynamic_processes @relation("process_chain_links_source_process_idTodynamic_processes", fields: [source_process_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  dynamic_processes_process_chain_links_target_process_idTodynamic_processes dynamic_processes @relation("process_chain_links_target_process_idTodynamic_processes", fields: [target_process_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([source_process_id, target_process_id], map: "process_chain_links_source_process_id_target_process_id_index")
  @@index([chain_id], map: "process_chain_links_chain_id_index")
  @@index([chain_id, order_position], map: "process_chain_links_chain_id_order_position_index")
  @@index([is_root, chain_id], map: "process_chain_links_is_root_chain_id_index")
  @@index([position], map: "process_chain_links_position_index")
  @@index([source_process_id], map: "process_chain_links_source_process_id_index")
  @@index([target_process_id], map: "process_chain_links_target_process_id_index")
}

model push_notifications {
  id          BigInt    @id @default(autoincrement())
  user_id     Int
  status      String    @db.VarChar(255)
  sent_at     DateTime? @db.Timestamp(0)
  inserted_at DateTime  @db.Timestamp(0)
  updated_at  DateTime  @db.Timestamp(0)

  @@index([user_id], map: "push_notifications_user_id_index")
}

model q_and_as {
  id               BigInt           @id @default(autoincrement())
  title            String           @db.VarChar(255)
  question         String
  status           String           @db.VarChar(255)
  votes_count      Int              @default(0)
  version_id       BigInt
  created_by       BigInt
  inserted_at      DateTime         @db.Timestamp(0)
  updated_at       DateTime         @db.Timestamp(0)
  tbl_system_users tbl_system_users @relation(fields: [created_by], references: [id], onUpdate: NoAction)
  versions         versions         @relation(fields: [version_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([created_by], map: "q_and_as_created_by_index")
  @@index([status], map: "q_and_as_status_index")
  @@index([version_id], map: "q_and_as_version_id_index")
  @@index([votes_count], map: "q_and_as_votes_count_index")
}

model request_template_fields {
  id                  BigInt            @id @default(autoincrement())
  request_template_id BigInt
  field_name          String            @db.VarChar(255)
  field_type          String            @default("string") @db.VarChar(255)
  field_path          String?           @db.VarChar(255)
  is_required         Boolean?          @default(false)
  default_value       String?
  placeholder         String?           @db.VarChar(255)
  validation_rules    Json?             @default("{}")
  description         String?
  field_order         Int?              @default(0)
  inserted_at         DateTime          @db.Timestamp(0)
  updated_at          DateTime          @db.Timestamp(0)
  request_templates   request_templates @relation(fields: [request_template_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([request_template_id, field_name], map: "request_template_fields_request_template_id_field_name_index")
  @@index([field_order], map: "request_template_fields_field_order_index")
  @@index([request_template_id], map: "request_template_fields_request_template_id_index")
}

model request_templates {
  id                          BigInt                        @id @default(autoincrement())
  name                        String                        @unique(map: "request_templates_name_index") @db.VarChar(255)
  description                 String?
  request_type                String?                       @default("json") @db.VarChar(255)
  enabled                     Boolean?                      @default(true)
  created_by                  String?                       @db.VarChar(255)
  updated_by                  String?                       @db.VarChar(255)
  inserted_at                 DateTime                      @db.Timestamp(0)
  updated_at                  DateTime                      @db.Timestamp(0)
  context_id                  BigInt?
  integration_test_executions integration_test_executions[]
  integrations                integrations[]
  request_template_fields     request_template_fields[]
  mobile_form_contexts        mobile_form_contexts?         @relation(fields: [context_id], references: [id], onUpdate: NoAction)
  trigger_executions          trigger_executions[]
  trigger_integrations        trigger_integrations[]
  wizard_triggers             wizard_triggers[]

  @@index([context_id], map: "request_templates_context_id_index")
  @@index([enabled], map: "request_templates_enabled_index")
  @@index([request_type], map: "request_templates_request_type_index")
}

model roles_and_permissions {
  id          BigInt   @id @default(autoincrement())
  name        String?  @db.VarChar(255)
  rights      Json?
  created_by  Int?
  updated_by  Int?
  status      String?  @db.VarChar(255)
  inserted_at DateTime @db.Timestamp(0)
  updated_at  DateTime @db.Timestamp(0)
}

model route_process_links {
  id                 BigInt            @id @default(autoincrement())
  route_id           BigInt
  initial_process_id BigInt
  created_by_id      BigInt?
  inserted_at        DateTime          @db.Timestamp(0)
  updated_at         DateTime          @db.Timestamp(0)
  tbl_system_users   tbl_system_users? @relation(fields: [created_by_id], references: [id], onUpdate: NoAction)
  dynamic_processes  dynamic_processes @relation(fields: [initial_process_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  dynamic_routes     dynamic_routes    @relation(fields: [route_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([initial_process_id], map: "route_process_links_initial_process_id_index")
  @@index([route_id], map: "route_process_links_route_id_index")
}

model routes {
  id          BigInt   @id @default(autoincrement())
  name        String   @unique(map: "routes_name_index") @db.VarChar(255)
  host        String   @db.VarChar(255)
  path        String   @db.VarChar(255)
  method      String   @db.VarChar(255)
  inserted_at DateTime @db.Timestamp(0)
  updated_at  DateTime @db.Timestamp(0)

  @@index([host], map: "routes_host_index")
  @@index([path], map: "routes_path_index")
}

model schema_migrations {
  version     BigInt    @id
  inserted_at DateTime? @db.Timestamp(0)
}

model settings {
  id          BigInt   @id @default(autoincrement())
  key         String?  @db.VarChar(255)
  value       String?  @db.VarChar(255)
  config      Json?
  created_by  Int?
  updated_by  Int?
  status      String?  @default("active") @db.VarChar(255)
  inserted_at DateTime @db.Timestamp(0)
  updated_at  DateTime @db.Timestamp(0)
}

model statistics {
  id                  BigInt    @id @default(autoincrement())
  total_users         Int?      @default(0)
  total_accounts      Int?      @default(0)
  total_cards         Int?      @default(0)
  total_transactions  Int?      @default(0)
  total_bank_accounts Int?      @default(0)
  total_beneficiaries Int?      @default(0)
  total_fund_accounts Int?      @default(0)
  total_transfers     Int?      @default(0)
  total_tokens        Int?      @default(0)
  updated_at          DateTime? @db.Timestamp(0)
}

model system_logs {
  id          BigInt    @id @default(autoincrement())
  timestamp   DateTime? @default(now()) @db.Timestamp(6)
  level       String    @db.VarChar(255)
  category    String    @db.VarChar(255)
  message     String
  metadata    Json?
  source      String?   @db.VarChar(255)
  trace_id    String?   @db.VarChar(255)
  user_id     Int?
  ip_address  String?   @db.Inet
  inserted_at DateTime  @db.Timestamp(0)
  updated_at  DateTime  @db.Timestamp(0)

  @@index([category], map: "system_logs_category_index")
  @@index([level], map: "system_logs_level_index")
  @@index([metadata], map: "system_logs_metadata_index", type: Gin)
  @@index([timestamp], map: "system_logs_timestamp_index")
  @@index([trace_id], map: "system_logs_trace_id_index")
}

model t_24_logs {
  id          BigInt   @id @default(autoincrement())
  message_id  String?  @db.VarChar(255)
  url         String?  @db.VarChar(255)
  method      String?  @db.VarChar(255)
  headers     String?
  request     String?
  response    String?
  inserted_at DateTime @db.Timestamp(0)
  updated_at  DateTime @db.Timestamp(0)
}

model tbl_system_users {
  id                                                                   BigInt                       @id @default(autoincrement())
  email                                                                String                       @db.Citext
  nickname                                                             String?                      @db.VarChar(255)
  hashed_password                                                      String                       @db.VarChar(255)
  first_name                                                           String?                      @db.VarChar(255)
  last_name                                                            String?                      @db.VarChar(255)
  phone_number                                                         String?                      @db.VarChar(255)
  date_of_birth                                                        DateTime?                    @db.Date
  address                                                              String?                      @db.VarChar(255)
  city                                                                 String?                      @db.VarChar(255)
  state                                                                String?                      @db.VarChar(255)
  zip                                                                  String?                      @db.VarChar(255)
  country                                                              String?                      @db.VarChar(255)
  status                                                               String?                      @default("inactive") @db.VarChar(255)
  approved                                                             Boolean?                     @default(false)
  first_time_login                                                     Boolean?                     @default(true)
  account_balance                                                      Float?                       @default(0.0)
  account_number                                                       String?                      @db.VarChar(255)
  confirmed_at                                                         DateTime?                    @db.Timestamp(0)
  roles_and_permission_id                                              Int?
  memorable_word                                                       String?                      @db.VarChar(255)
  otp                                                                  String?                      @db.VarChar(255)
  email_notifications                                                  Boolean?                     @default(true)
  sms_notifications                                                    Boolean?                     @default(true)
  push_notifications                                                   Boolean?                     @default(true)
  customer_no                                                          String?                      @db.VarChar(255)
  created_by                                                           Int?
  updated_by                                                           Int?
  inserted_at                                                          DateTime                     @db.Timestamp(0)
  updated_at                                                           DateTime                     @db.Timestamp(0)
  profile_picture                                                      String?
  activation_status                                                    String?                      @default("pending") @db.VarChar(255)
  reason                                                               String?
  api_documentation_sections                                           api_documentation_sections[]
  api_endpoints                                                        api_endpoints[]
  api_schemas                                                          api_schemas[]
  code_steps_code_steps_author_idTotbl_system_users                    code_steps[]                 @relation("code_steps_author_idTotbl_system_users")
  code_steps_code_steps_created_by_idTotbl_system_users                code_steps[]                 @relation("code_steps_created_by_idTotbl_system_users")
  deleted_archive_deleted_archive_created_byTotbl_system_users         deleted_archive[]            @relation("deleted_archive_created_byTotbl_system_users")
  deleted_archive_deleted_archive_updated_byTotbl_system_users         deleted_archive[]            @relation("deleted_archive_updated_byTotbl_system_users")
  dynamic_processes                                                    dynamic_processes[]
  form_wizards                                                         form_wizards[]
  image_gallery                                                        image_gallery[]
  issues_issues_assignee_idTotbl_system_users                          issues[]                     @relation("issues_assignee_idTotbl_system_users")
  issues_issues_created_byTotbl_system_users                           issues[]                     @relation("issues_created_byTotbl_system_users")
  loan_customer_batch_loan_customer_batch_checker_idTotbl_system_users loan_customer_batch[]        @relation("loan_customer_batch_checker_idTotbl_system_users")
  loan_customer_batch_loan_customer_batch_maker_idTotbl_system_users   loan_customer_batch[]        @relation("loan_customer_batch_maker_idTotbl_system_users")
  loan_customers_loan_customers_checker_idTotbl_system_users           loan_customers[]             @relation("loan_customers_checker_idTotbl_system_users")
  loan_customers_loan_customers_maker_idTotbl_system_users             loan_customers[]             @relation("loan_customers_maker_idTotbl_system_users")
  loan_partnerships_loan_partnerships_checker_idTotbl_system_users     loan_partnerships[]          @relation("loan_partnerships_checker_idTotbl_system_users")
  loan_partnerships_loan_partnerships_maker_idTotbl_system_users       loan_partnerships[]          @relation("loan_partnerships_maker_idTotbl_system_users")
  loan_products_loan_products_checker_idTotbl_system_users             loan_products[]              @relation("loan_products_checker_idTotbl_system_users")
  loan_products_loan_products_maker_idTotbl_system_users               loan_products[]              @relation("loan_products_maker_idTotbl_system_users")
  loan_terms_loan_terms_checker_idTotbl_system_users                   loan_terms[]                 @relation("loan_terms_checker_idTotbl_system_users")
  loan_terms_loan_terms_maker_idTotbl_system_users                     loan_terms[]                 @relation("loan_terms_maker_idTotbl_system_users")
  messages                                                             messages[]
  mobile_form_contexts                                                 mobile_form_contexts[]
  process_chain_links                                                  process_chain_links[]
  q_and_as                                                             q_and_as[]
  route_process_links                                                  route_process_links[]
  tbl_system_users_tokens                                              tbl_system_users_tokens[]
  third_party_api_key                                                  third_party_api_key[]
  ui_feature_feedback                                                  ui_feature_feedback[]
  ui_features                                                          ui_features[]
  ui_user_guides                                                       ui_user_guides[]
  user_context_selections                                              user_context_selections?

  @@unique([email, phone_number], map: "tbl_system_users_email_phone_number_index")
  @@index([activation_status], map: "tbl_system_users_activation_status_index")
  @@index([status], map: "tbl_system_users_status_index")
}

model tbl_system_users_tokens {
  id               BigInt           @id @default(autoincrement())
  user_id          BigInt
  token            Bytes
  context          String           @db.VarChar(255)
  sent_to          String?          @db.VarChar(255)
  inserted_at      DateTime         @db.Timestamp(0)
  tbl_system_users tbl_system_users @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([context, token], map: "tbl_system_users_tokens_context_token_index")
  @@index([user_id], map: "tbl_system_users_tokens_user_id_index")
}

model third_party_api_key {
  id               BigInt           @id @default(autoincrement())
  api_key          String           @unique(map: "third_party_api_key_api_key_index") @db.VarChar(255)
  description      String?          @db.VarChar(255)
  user_id          BigInt
  inserted_at      DateTime         @db.Timestamp(0)
  updated_at       DateTime         @db.Timestamp(0)
  active_devices   active_devices[]
  ip_whitelists    ip_whitelists[]
  tbl_system_users tbl_system_users @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model tokens {
  id             BigInt         @id @default(autoincrement())
  token          String         @unique(map: "tokens_token_index") @db.VarChar(255)
  user_id        BigInt
  expires_at     DateTime       @db.Timestamp(0)
  revoked_at     DateTime?      @db.Timestamp(0)
  inserted_at    DateTime       @db.Timestamp(0)
  updated_at     DateTime       @db.Timestamp(0)
  accounts_users accounts_users @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([user_id], map: "tokens_user_id_index")
}

model topics {
  id             BigInt          @id @default(autoincrement())
  name           String          @unique(map: "topics_name_index") @db.VarChar(255)
  description    String?
  color          String?         @default("#3b82f6") @db.VarChar(255)
  order_priority Int?            @default(0)
  active         Boolean?        @default(true)
  inserted_at    DateTime        @db.Timestamp(0)
  updated_at     DateTime        @db.Timestamp(0)
  image_gallery  image_gallery[]
  ui_features    ui_features[]

  @@index([active], map: "topics_active_index")
  @@index([order_priority], map: "topics_order_priority_index")
}

model transaction_status_history {
  id             BigInt   @id @default(autoincrement())
  transaction_id Int
  from_status    String?  @db.VarChar(255)
  to_status      String   @db.VarChar(255)
  changed_by     Int?
  notes          String?  @db.VarChar(255)
  metadata       Json?    @default("{}")
  inserted_at    DateTime @db.Timestamp(0)
  updated_at     DateTime @db.Timestamp(0)

  @@index([inserted_at], map: "transaction_status_history_inserted_at_index")
  @@index([to_status], map: "transaction_status_history_to_status_index")
  @@index([transaction_id], map: "transaction_status_history_transaction_id_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model transactions {
  id                                                        BigInt          @id @default(autoincrement())
  type                                                      String          @db.VarChar(255)
  amount                                                    Decimal         @db.Decimal(10, 2)
  description                                               String?         @db.VarChar(255)
  status                                                    String?         @db.VarChar(255)
  from_account_id                                           BigInt?
  to_account_id                                             BigInt?
  credit_amount                                             Decimal?        @default(0) @db.Decimal(10, 2)
  debit_amount                                              Decimal?        @default(0) @db.Decimal(10, 2)
  reference                                                 String?         @db.VarChar(255)
  value_date                                                DateTime?       @db.Date
  opening_balance                                           Decimal?        @db.Decimal(10, 2)
  closing_balance                                           Decimal?        @db.Decimal(10, 2)
  inserted_at                                               DateTime        @db.Timestamp(0)
  updated_at                                                DateTime        @db.Timestamp(0)
  owner_id                                                  BigInt?
  sender_account                                            String?         @db.VarChar(255)
  receiver_account                                          String?         @db.VarChar(255)
  from_wallet_id                                            BigInt?
  to_wallet_id                                              BigInt?
  original_transaction_id                                   BigInt?
  is_reversal                                               Boolean?        @default(false)
  transaction_details                                       Json?           @default("{}")
  callback_status                                           String?         @default("pending") @db.VarChar(255)
  cbs_transaction_reference                                 String?         @db.VarChar(255)
  external_reference                                        String?         @db.VarChar(255)
  fund_accounts_transactions_from_account_idTofund_accounts fund_accounts?  @relation("transactions_from_account_idTofund_accounts", fields: [from_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  walletusers_transactions_from_wallet_idTowalletusers      walletusers?    @relation("transactions_from_wallet_idTowalletusers", fields: [from_wallet_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  transactions                                              transactions?   @relation("transactionsTotransactions", fields: [original_transaction_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  other_transactions                                        transactions[]  @relation("transactionsTotransactions")
  accounts_users                                            accounts_users? @relation(fields: [owner_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  fund_accounts_transactions_to_account_idTofund_accounts   fund_accounts?  @relation("transactions_to_account_idTofund_accounts", fields: [to_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  walletusers_transactions_to_wallet_idTowalletusers        walletusers?    @relation("transactions_to_wallet_idTowalletusers", fields: [to_wallet_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([callback_status], map: "transactions_callback_status_index")
  @@index([from_account_id], map: "transactions_from_account_id_index")
  @@index([from_wallet_id], map: "transactions_from_wallet_id_index")
  @@index([is_reversal], map: "transactions_is_reversal_index")
  @@index([original_transaction_id], map: "transactions_original_transaction_id_index")
  @@index([owner_id], map: "transactions_owner_id_index")
  @@index([receiver_account], map: "transactions_receiver_account_index")
  @@index([sender_account], map: "transactions_sender_account_index")
  @@index([status], map: "transactions_status_index")
  @@index([to_account_id], map: "transactions_to_account_id_index")
  @@index([to_wallet_id], map: "transactions_to_wallet_id_index")
  @@index([type], map: "transactions_type_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model trigger_execution_logs {
  id                String   @id @db.Uuid
  trigger_id        String   @db.Uuid
  wizard_step_id    String?  @db.Uuid
  user_id           String?  @db.Uuid
  execution_type    String   @db.VarChar(255)
  request_payload   Json?
  response_payload  Json?
  execution_time_ms Int?
  status            String   @db.VarChar(255)
  error_message     String?
  error_details     Json?
  executed_at       DateTime @db.Timestamp(0)
  inserted_at       DateTime @db.Timestamp(0)
  updated_at        DateTime @db.Timestamp(0)
  triggers          triggers @relation(fields: [trigger_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([executed_at], map: "trigger_execution_logs_executed_at_index")
  @@index([executed_at, status], map: "trigger_execution_logs_executed_at_status_index")
  @@index([execution_type], map: "trigger_execution_logs_execution_type_index")
  @@index([status], map: "trigger_execution_logs_status_index")
  @@index([trigger_id], map: "trigger_execution_logs_trigger_id_index")
  @@index([trigger_id, status], map: "trigger_execution_logs_trigger_id_status_index")
  @@index([user_id], map: "trigger_execution_logs_user_id_index")
  @@index([wizard_step_id], map: "trigger_execution_logs_wizard_step_id_index")
}

model trigger_executions {
  id                  String             @id @db.Uuid
  trigger_id          String             @db.Uuid
  wizard_id           BigInt?
  integration_id      BigInt?
  request_template_id BigInt?
  execution_context   String             @db.VarChar(255)
  input_data          Json               @default("{}")
  mapped_data         Json               @default("{}")
  output_data         Json               @default("{}")
  execution_status    String             @db.VarChar(255)
  execution_time_ms   Int?
  error_message       String?
  executed_by         String?            @db.VarChar(255)
  inserted_at         DateTime           @db.Timestamp(0)
  updated_at          DateTime           @db.Timestamp(0)
  integrations        integrations?      @relation(fields: [integration_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  request_templates   request_templates? @relation(fields: [request_template_id], references: [id], onUpdate: NoAction)
  triggers            triggers           @relation(fields: [trigger_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  form_wizards        form_wizards?      @relation(fields: [wizard_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([execution_status], map: "trigger_executions_execution_status_index")
  @@index([inserted_at], map: "trigger_executions_inserted_at_index")
  @@index([integration_id], map: "trigger_executions_integration_id_index")
  @@index([trigger_id], map: "trigger_executions_trigger_id_index")
  @@index([wizard_id], map: "trigger_executions_wizard_id_index")
}

model trigger_integrations {
  id                  String             @id @db.Uuid
  trigger_id          String             @db.Uuid
  integration_id      BigInt
  request_template_id BigInt?
  enabled             Boolean            @default(true)
  execution_order     Int                @default(1)
  data_mapping        Json               @default("{}")
  created_by          String?            @db.VarChar(255)
  updated_by          String?            @db.VarChar(255)
  inserted_at         DateTime           @db.Timestamp(0)
  updated_at          DateTime           @db.Timestamp(0)
  integrations        integrations       @relation(fields: [integration_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  request_templates   request_templates? @relation(fields: [request_template_id], references: [id], onUpdate: NoAction)
  triggers            triggers           @relation(fields: [trigger_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([trigger_id, integration_id], map: "trigger_integrations_trigger_id_integration_id_index")
  @@index([integration_id], map: "trigger_integrations_integration_id_index")
  @@index([request_template_id], map: "trigger_integrations_request_template_id_index")
  @@index([trigger_id], map: "trigger_integrations_trigger_id_index")
}

model trigger_plugins {
  id              String   @id @db.Uuid
  trigger_id      String   @db.Uuid
  plugin_name     String   @db.VarChar(255)
  plugin_config   Json     @default("{}")
  enabled         Boolean  @default(true)
  execution_order Int      @default(1)
  created_by      String?  @db.VarChar(255)
  updated_by      String?  @db.VarChar(255)
  inserted_at     DateTime @db.Timestamp(0)
  updated_at      DateTime @db.Timestamp(0)
  triggers        triggers @relation(fields: [trigger_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([trigger_id, plugin_name], map: "trigger_plugins_trigger_id_plugin_name_index")
  @@index([plugin_name], map: "trigger_plugins_plugin_name_index")
  @@index([trigger_id], map: "trigger_plugins_trigger_id_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model triggers {
  id                     String                   @id @db.Uuid
  name                   String                   @db.VarChar(255)
  module_name            String                   @db.VarChar(255)
  function_name          String                   @db.VarChar(255)
  mount_point            String                   @unique(map: "triggers_mount_point_index") @db.VarChar(255)
  input_schema           Json?
  execution_type         String                   @db.VarChar(255)
  return_data            Boolean?                 @default(false)
  logging_enabled        Boolean?                 @default(false)
  rate_limiting_enabled  Boolean?                 @default(false)
  audit_logging_enabled  Boolean?                 @default(false)
  sandbox_execution      Boolean?                 @default(true)
  description            String?
  enabled                Boolean?                 @default(true)
  inserted_at            DateTime                 @db.Timestamp(0)
  updated_at             DateTime                 @db.Timestamp(0)
  context_id             BigInt?
  trigger_execution_logs trigger_execution_logs[]
  trigger_executions     trigger_executions[]
  trigger_integrations   trigger_integrations[]
  trigger_plugins        trigger_plugins[]
  mobile_form_contexts   mobile_form_contexts?    @relation(fields: [context_id], references: [id], onUpdate: NoAction)
  wizard_step_triggers   wizard_step_triggers[]
  wizard_triggers        wizard_triggers[]

  @@index([context_id], map: "triggers_context_id_index")
  @@index([enabled], map: "triggers_enabled_index")
  @@index([execution_type], map: "triggers_execution_type_index")
  @@index([function_name], map: "triggers_function_name_index")
  @@index([module_name], map: "triggers_module_name_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model ui_feature_feedback {
  id                 BigInt            @id @default(autoincrement())
  feedback_type      String            @db.VarChar(255)
  title              String            @db.VarChar(255)
  description        String
  priority           String?           @default("medium") @db.VarChar(255)
  status             String?           @default("open") @db.VarChar(255)
  user_agent         String?           @db.VarChar(255)
  browser_info       Json?
  screenshot_uri     String?           @db.VarChar(255)
  screenshot_base64  String?
  reproduction_steps String?
  user_email         String?           @db.VarChar(255)
  user_role          String?           @db.VarChar(255)
  ui_feature_id      BigInt
  assigned_to_id     BigInt?
  inserted_at        DateTime          @db.Timestamp(0)
  updated_at         DateTime          @db.Timestamp(0)
  tbl_system_users   tbl_system_users? @relation(fields: [assigned_to_id], references: [id], onUpdate: NoAction)
  ui_features        ui_features       @relation(fields: [ui_feature_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([feedback_type], map: "ui_feature_feedback_feedback_type_index")
  @@index([priority], map: "ui_feature_feedback_priority_index")
  @@index([status], map: "ui_feature_feedback_status_index")
  @@index([ui_feature_id], map: "ui_feature_feedback_ui_feature_id_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model ui_feature_relationships {
  id                                                                  BigInt      @id @default(autoincrement())
  parent_feature_id                                                   BigInt
  child_feature_id                                                    BigInt
  relationship_type                                                   String      @db.VarChar(255)
  description                                                         String?
  order_in_workflow                                                   Int?        @default(0)
  inserted_at                                                         DateTime    @db.Timestamp(0)
  updated_at                                                          DateTime    @db.Timestamp(0)
  ui_features_ui_feature_relationships_child_feature_idToui_features  ui_features @relation("ui_feature_relationships_child_feature_idToui_features", fields: [child_feature_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  ui_features_ui_feature_relationships_parent_feature_idToui_features ui_features @relation("ui_feature_relationships_parent_feature_idToui_features", fields: [parent_feature_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([child_feature_id], map: "ui_feature_relationships_child_feature_id_index")
  @@index([parent_feature_id], map: "ui_feature_relationships_parent_feature_id_index")
  @@index([relationship_type], map: "ui_feature_relationships_relationship_type_index")
}

model ui_feature_sections {
  id                  BigInt         @id @default(autoincrement())
  title               String         @db.VarChar(255)
  slug                String         @db.VarChar(255)
  description         String?
  section_type        String         @db.VarChar(255)
  order_index         Int?           @default(0)
  status              String?        @default("active") @db.VarChar(255)
  url_path            String?        @db.VarChar(255)
  navigation_label    String?        @db.VarChar(255)
  external_link       String?        @db.VarChar(255)
  deep_link           String?        @db.VarChar(255)
  image_base64        String?
  image_uri           String?        @db.VarChar(255)
  image_content_type  String?        @db.VarChar(255)
  image_storage_type  String?        @default("base64") @db.VarChar(255)
  instructions        String?
  technical_notes     String?
  accessibility_notes String?
  prerequisites       String?
  ui_feature_id       BigInt
  inserted_at         DateTime       @db.Timestamp(0)
  updated_at          DateTime       @db.Timestamp(0)
  gallery_image_id    BigInt?
  image_gallery       image_gallery? @relation(fields: [gallery_image_id], references: [id], onUpdate: NoAction)
  ui_features         ui_features    @relation(fields: [ui_feature_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([slug, ui_feature_id], map: "ui_feature_sections_slug_ui_feature_id_index")
  @@index([gallery_image_id], map: "ui_feature_sections_gallery_image_id_index")
  @@index([order_index], map: "ui_feature_sections_order_index_index")
  @@index([section_type], map: "ui_feature_sections_section_type_index")
  @@index([status], map: "ui_feature_sections_status_index")
  @@index([ui_feature_id], map: "ui_feature_sections_ui_feature_id_index")
  @@index([url_path], map: "ui_feature_sections_url_path_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model ui_features {
  id                                                                               BigInt                     @id @default(autoincrement())
  title                                                                            String                     @db.VarChar(255)
  slug                                                                             String                     @unique(map: "ui_features_slug_index") @db.VarChar(255)
  description                                                                      String?
  feature_type                                                                     String                     @db.VarChar(255)
  category                                                                         String?                    @db.VarChar(255)
  url_path                                                                         String?                    @db.VarChar(255)
  access_level                                                                     String?                    @default("authenticated") @db.VarChar(255)
  status                                                                           String?                    @default("active") @db.VarChar(255)
  order_priority                                                                   Int                        @default(0)
  parent_feature_id                                                                BigInt?
  version                                                                          String?                    @default("1.0.0") @db.VarChar(255)
  last_updated_by                                                                  String?                    @db.VarChar(255)
  changelog                                                                        String?
  keywords                                                                         String[]                   @default([]) @db.VarChar(255)
  search_tags                                                                      String[]                   @default([]) @db.VarChar(255)
  context_id                                                                       BigInt?
  created_by_id                                                                    BigInt?
  inserted_at                                                                      DateTime                   @db.Timestamp(0)
  updated_at                                                                       DateTime                   @db.Timestamp(0)
  image_base64                                                                     String?
  image_uri                                                                        String?                    @db.VarChar(255)
  image_content_type                                                               String?                    @db.VarChar(255)
  image_storage_type                                                               String?                    @default("base64") @db.VarChar(255)
  user_guide                                                                       String?
  technical_notes                                                                  String?
  accessibility_notes                                                              String?
  topic_id                                                                         BigInt?
  order_within_topic                                                               Int?                       @default(0)
  ui_feature_feedback                                                              ui_feature_feedback[]
  ui_feature_relationships_ui_feature_relationships_child_feature_idToui_features  ui_feature_relationships[] @relation("ui_feature_relationships_child_feature_idToui_features")
  ui_feature_relationships_ui_feature_relationships_parent_feature_idToui_features ui_feature_relationships[] @relation("ui_feature_relationships_parent_feature_idToui_features")
  ui_feature_sections                                                              ui_feature_sections[]
  mobile_form_contexts                                                             mobile_form_contexts?      @relation(fields: [context_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  tbl_system_users                                                                 tbl_system_users?          @relation(fields: [created_by_id], references: [id], onUpdate: NoAction)
  ui_features                                                                      ui_features?               @relation("ui_featuresToui_features", fields: [parent_feature_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  other_ui_features                                                                ui_features[]              @relation("ui_featuresToui_features")
  topics                                                                           topics?                    @relation(fields: [topic_id], references: [id], onUpdate: NoAction)
  ui_interactive_elements                                                          ui_interactive_elements[]
  ui_screenshots                                                                   ui_screenshots[]
  ui_user_guides                                                                   ui_user_guides[]

  @@index([category], map: "ui_features_category_index")
  @@index([context_id], map: "ui_features_context_id_index")
  @@index([created_by_id], map: "ui_features_created_by_id_index")
  @@index([feature_type], map: "ui_features_feature_type_index")
  @@index([order_priority], map: "ui_features_order_priority_index")
  @@index([parent_feature_id], map: "ui_features_parent_feature_id_index")
  @@index([status], map: "ui_features_status_index")
  @@index([topic_id], map: "ui_features_topic_id_index")
  @@index([topic_id, order_within_topic], map: "ui_features_topic_id_order_within_topic_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model ui_interactive_elements {
  id                  BigInt          @id @default(autoincrement())
  name                String          @db.VarChar(255)
  element_type        String          @db.VarChar(255)
  selector            String?         @db.VarChar(255)
  description         String?
  action_description  String?
  keyboard_shortcuts  String[]        @default([]) @db.VarChar(255)
  tooltip_text        String?         @db.VarChar(255)
  accessibility_notes String?
  position_x          Int?
  position_y          Int?
  width               Int?
  height              Int?
  states              Json?
  validation_rules    Json?
  ui_feature_id       BigInt
  ui_screenshot_id    BigInt?
  inserted_at         DateTime        @db.Timestamp(0)
  updated_at          DateTime        @db.Timestamp(0)
  ui_features         ui_features     @relation(fields: [ui_feature_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  ui_screenshots      ui_screenshots? @relation(fields: [ui_screenshot_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([element_type], map: "ui_interactive_elements_element_type_index")
  @@index([ui_feature_id], map: "ui_interactive_elements_ui_feature_id_index")
  @@index([ui_screenshot_id], map: "ui_interactive_elements_ui_screenshot_id_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model ui_screenshots {
  id                      BigInt                    @id @default(autoincrement())
  title                   String                    @db.VarChar(255)
  description             String?
  screenshot_type         String                    @db.VarChar(255)
  device_type             String?                   @default("desktop") @db.VarChar(255)
  image_uri               String?                   @db.VarChar(255)
  image_base64            String?
  image_storage_type      String                    @default("uri") @db.VarChar(255)
  image_caption           String?                   @db.VarChar(255)
  image_alt_text          String?                   @db.VarChar(255)
  display_order           Int                       @default(0)
  resolution              String?                   @db.VarChar(255)
  file_size               Int?
  annotations             Json?
  ui_feature_id           BigInt
  inserted_at             DateTime                  @db.Timestamp(0)
  updated_at              DateTime                  @db.Timestamp(0)
  ui_interactive_elements ui_interactive_elements[]
  ui_features             ui_features               @relation(fields: [ui_feature_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([device_type], map: "ui_screenshots_device_type_index")
  @@index([display_order], map: "ui_screenshots_display_order_index")
  @@index([screenshot_type], map: "ui_screenshots_screenshot_type_index")
  @@index([ui_feature_id], map: "ui_screenshots_ui_feature_id_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model ui_user_guides {
  id                 BigInt            @id @default(autoincrement())
  title              String            @db.VarChar(255)
  slug               String            @unique(map: "ui_user_guides_slug_index") @db.VarChar(255)
  guide_type         String            @db.VarChar(255)
  difficulty_level   String?           @default("beginner") @db.VarChar(255)
  content            String
  estimated_time     String?           @db.VarChar(255)
  prerequisites      String[]          @default([]) @db.VarChar(255)
  learning_outcomes  String[]          @default([]) @db.VarChar(255)
  order_priority     Int               @default(0)
  published          Boolean           @default(true)
  featured           Boolean           @default(false)
  video_uri          String?           @db.VarChar(255)
  video_base64       String?
  video_storage_type String?           @default("uri") @db.VarChar(255)
  video_duration     String?           @db.VarChar(255)
  video_transcript   String?
  meta_description   String?           @db.VarChar(255)
  meta_keywords      String[]          @default([]) @db.VarChar(255)
  ui_feature_id      BigInt
  created_by_id      BigInt?
  inserted_at        DateTime          @db.Timestamp(0)
  updated_at         DateTime          @db.Timestamp(0)
  tbl_system_users   tbl_system_users? @relation(fields: [created_by_id], references: [id], onUpdate: NoAction)
  ui_features        ui_features       @relation(fields: [ui_feature_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([created_by_id], map: "ui_user_guides_created_by_id_index")
  @@index([difficulty_level], map: "ui_user_guides_difficulty_level_index")
  @@index([featured], map: "ui_user_guides_featured_index")
  @@index([guide_type], map: "ui_user_guides_guide_type_index")
  @@index([published], map: "ui_user_guides_published_index")
  @@index([ui_feature_id], map: "ui_user_guides_ui_feature_id_index")
}

model user_context_selections {
  id                   BigInt                @id @default(autoincrement())
  user_id              BigInt                @unique(map: "user_context_selections_user_id_index")
  context_id           BigInt?
  inserted_at          DateTime              @db.Timestamp(0)
  updated_at           DateTime              @db.Timestamp(0)
  mobile_form_contexts mobile_form_contexts? @relation(fields: [context_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  tbl_system_users     tbl_system_users      @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([context_id], map: "user_context_selections_context_id_index")
}

model user_tracking {
  id                 BigInt          @id @default(autoincrement())
  user_id            BigInt?
  wallet_user_id     BigInt?
  session_id         String?         @db.VarChar(255)
  page_path          String          @db.VarChar(255)
  page_name          String?         @db.VarChar(255)
  section            String?         @db.VarChar(255)
  action             String?         @db.VarChar(255)
  previous_page_path String?         @db.VarChar(255)
  next_page_path     String?         @db.VarChar(255)
  device_id          String?         @db.VarChar(255)
  device_name        String?         @db.VarChar(255)
  ip_address         String?         @db.VarChar(255)
  user_agent         String?
  entry_timestamp    DateTime        @db.Timestamp(0)
  exit_timestamp     DateTime?       @db.Timestamp(0)
  duration_seconds   Int?
  status             String?         @default("active") @db.VarChar(255)
  metadata           Json?           @default("{}")
  inserted_at        DateTime        @db.Timestamp(0)
  updated_at         DateTime        @db.Timestamp(0)
  accounts_users     accounts_users? @relation(fields: [user_id], references: [id], onUpdate: NoAction)
  walletusers        walletusers?    @relation(fields: [wallet_user_id], references: [id], onUpdate: NoAction)

  @@index([device_id], map: "user_tracking_device_id_index")
  @@index([entry_timestamp], map: "user_tracking_entry_timestamp_index")
  @@index([page_path], map: "user_tracking_page_path_index")
  @@index([session_id], map: "user_tracking_session_id_index")
  @@index([status], map: "user_tracking_status_index")
  @@index([user_id], map: "user_tracking_user_id_index")
  @@index([wallet_user_id], map: "user_tracking_wallet_user_id_index")
}

model ussd_menus {
  menu_id                                              String         @id @db.Uuid
  title                                                String         @db.VarChar(200)
  menu_order                                           Int            @default(0)
  version                                              String         @db.VarChar(20)
  active                                               Boolean        @default(true)
  inserted_at                                          DateTime       @db.Timestamp(0)
  updated_at                                           DateTime       @db.Timestamp(0)
  ussd_options_ussd_options_menu_idToussd_menus        ussd_options[] @relation("ussd_options_menu_idToussd_menus")
  ussd_options_ussd_options_target_menu_idToussd_menus ussd_options[] @relation("ussd_options_target_menu_idToussd_menus")

  @@unique([title, version], map: "ussd_menus_unique_title_version_constraint")
  @@index([active], map: "ussd_menus_active_index")
  @@index([menu_order], map: "ussd_menus_menu_order_index")
  @@index([version], map: "ussd_menus_version_index")
}

model ussd_options {
  option_id                                          String      @id @db.Uuid
  menu_id                                            String      @db.Uuid
  text                                               String      @db.VarChar(200)
  action                                             String      @db.VarChar(20)
  target_menu_id                                     String?     @db.Uuid
  option_order                                       Int         @default(0)
  active                                             Boolean     @default(true)
  inserted_at                                        DateTime    @db.Timestamp(0)
  updated_at                                         DateTime    @db.Timestamp(0)
  form_id                                            String?     @db.Uuid
  form_name                                          String?     @db.VarChar(100)
  ussd_menus_ussd_options_menu_idToussd_menus        ussd_menus  @relation("ussd_options_menu_idToussd_menus", fields: [menu_id], references: [menu_id], onDelete: Cascade, onUpdate: NoAction)
  ussd_menus_ussd_options_target_menu_idToussd_menus ussd_menus? @relation("ussd_options_target_menu_idToussd_menus", fields: [target_menu_id], references: [menu_id], onUpdate: NoAction)

  @@unique([menu_id, option_order], map: "ussd_options_unique_menu_order_constraint")
  @@index([action], map: "ussd_options_action_index")
  @@index([active], map: "ussd_options_active_index")
  @@index([form_id], map: "ussd_options_form_id_index")
  @@index([form_name], map: "ussd_options_form_name_index")
  @@index([menu_id], map: "ussd_options_menu_id_index")
  @@index([option_order], map: "ussd_options_option_order_index")
  @@index([target_menu_id], map: "ussd_options_target_menu_id_index")
}

model versions {
  id              BigInt            @id @default(autoincrement())
  version_number  String            @unique(map: "versions_version_number_index") @db.VarChar(255)
  release_date    DateTime          @db.Timestamp(0)
  title           String            @db.VarChar(255)
  description     String
  version_type    String            @db.VarChar(255)
  status          String            @db.VarChar(255)
  inserted_at     DateTime          @db.Timestamp(0)
  updated_at      DateTime          @db.Timestamp(0)
  changelog_items changelog_items[]
  issues          issues[]
  q_and_as        q_and_as[]

  @@index([release_date], map: "versions_release_date_index")
  @@index([status], map: "versions_status_index")
}

model virtual_cards_api_configs {
  id            BigInt   @id @default(autoincrement())
  provider_name String?  @db.VarChar(255)
  base_url      String?  @db.VarChar(255)
  auth_token    String?  @db.VarChar(255)
  api_key       String?  @db.VarChar(255)
  api_secret    String?  @db.VarChar(255)
  version       String?  @db.VarChar(255)
  timeout       Int?
  status        String?  @db.VarChar(255)
  notes         String?
  created_by    Int?
  updated_by    Int?
  is_default    Boolean? @default(false)
  inserted_at   DateTime @db.Timestamp(0)
  updated_at    DateTime @db.Timestamp(0)
}

model wallet_api_key {
  id             BigInt      @id @default(autoincrement())
  api_key        String      @unique(map: "wallet_api_key_api_key_index") @db.VarChar(255)
  description    String?     @db.VarChar(255)
  wallet_user_id BigInt
  inserted_at    DateTime    @db.Timestamp(0)
  updated_at     DateTime    @db.Timestamp(0)
  walletusers    walletusers @relation(fields: [wallet_user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model wallet_journal_entries {
  id              BigInt          @id @default(autoincrement())
  journal_id      BigInt
  account_number  String?         @db.VarChar(255)
  type            String?         @db.VarChar(255)
  description     String?
  amount          Decimal?        @default(0) @db.Decimal(20, 6)
  opening_balance Decimal?        @default(0) @db.Decimal(20, 6)
  closing_balance Decimal?        @default(0) @db.Decimal(20, 6)
  inserted_at     DateTime        @db.Timestamp(0)
  updated_at      DateTime        @db.Timestamp(0)
  wallet_journals wallet_journals @relation(fields: [journal_id], references: [id], onUpdate: NoAction)

  @@index([account_number, type], map: "wallet_journal_entries_account_number_type_index")
}

model wallet_journal_history {
  id              BigInt          @id @default(autoincrement())
  journal_id      BigInt
  status          String?         @db.VarChar(255)
  description     String?
  inserted_at     DateTime        @db.Timestamp(0)
  updated_at      DateTime        @db.Timestamp(0)
  wallet_journals wallet_journals @relation(fields: [journal_id], references: [id], onUpdate: NoAction)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model wallet_journals {
  id                     BigInt                   @id @default(autoincrement())
  transaction_type       String                   @db.VarChar(255)
  from_account_id        Int?
  to_account_id          Int?
  narration              String?
  description            String?
  reference              String?                  @db.VarChar(255)
  status                 String                   @default("pending") @db.VarChar(255)
  posted_at              DateTime?                @db.Timestamp(0)
  created_by             String?                  @db.VarChar(255)
  date                   DateTime                 @db.Timestamp(0)
  inserted_at            DateTime                 @db.Timestamp(0)
  updated_at             DateTime                 @db.Timestamp(0)
  wallet_journal_entries wallet_journal_entries[]
  wallet_journal_history wallet_journal_history[]

  @@index([date], map: "wallet_journals_date_index")
  @@index([from_account_id], map: "wallet_journals_from_account_id_index")
  @@index([status], map: "wallet_journals_status_index")
  @@index([to_account_id], map: "wallet_journals_to_account_id_index")
  @@index([transaction_type], map: "wallet_journals_transaction_type_index")
}

model wallet_tiers {
  id                        BigInt        @id @default(autoincrement())
  name                      String        @db.VarChar(255)
  description               String?       @db.VarChar(255)
  position                  Int           @unique(map: "wallet_tiers_position_index")
  is_default                Boolean?      @default(false)
  minimum_balance           Decimal       @default(0) @db.Decimal
  maximum_balance           Decimal       @db.Decimal
  min_transaction_amount    Decimal       @db.Decimal
  max_transaction_amount    Decimal       @db.Decimal
  daily_transaction_limit   Decimal       @db.Decimal
  monthly_transaction_limit Decimal       @db.Decimal
  daily_transaction_count   Int
  monthly_transaction_count Int
  required_kyc_fields       String[]      @db.VarChar(255)
  kyc_rules                 Json          @default("{}")
  inserted_at               DateTime      @db.Timestamp(0)
  updated_at                DateTime      @db.Timestamp(0)
  maximum_credit_limit      Decimal       @db.Decimal
  maximum_debt_limit        Decimal       @db.Decimal
  kyc_fields                Json?
  validation_rules          Json?
  walletusers               walletusers[]

  @@index([is_default], map: "wallet_tiers_is_default_index")
}

model wallet_tokens {
  id          BigInt      @id @default(autoincrement())
  token       String      @unique(map: "wallet_tokens_token_index") @db.VarChar(255)
  user_id     BigInt
  expires_at  DateTime    @db.Timestamp(0)
  revoked_at  DateTime?   @db.Timestamp(0)
  inserted_at DateTime    @db.Timestamp(0)
  updated_at  DateTime    @db.Timestamp(0)
  walletusers walletusers @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([user_id], map: "wallet_tokens_user_id_index")
}

model wallet_transactions {
  id                                                               BigInt                @id @default(autoincrement())
  type                                                             String                @db.VarChar(255)
  amount                                                           Decimal?              @db.Decimal(10, 2)
  description                                                      String?               @db.VarChar(255)
  status                                                           String                @db.VarChar(255)
  from_account_id                                                  BigInt?
  to_account_id                                                    BigInt?
  credit_amount                                                    Decimal               @default(0) @db.Decimal(10, 2)
  debit_amount                                                     Decimal               @default(0) @db.Decimal(10, 2)
  reference                                                        String                @db.VarChar(255)
  value_date                                                       DateTime              @db.Date
  opening_balance                                                  Decimal               @db.Decimal(10, 2)
  closing_balance                                                  Decimal               @db.Decimal(10, 2)
  inserted_at                                                      DateTime              @db.Timestamp(0)
  updated_at                                                       DateTime              @db.Timestamp(0)
  sender_account                                                   String?               @db.VarChar(255)
  receiver_account                                                 String?               @db.VarChar(255)
  from_wallet_id                                                   BigInt?
  to_wallet_id                                                     BigInt?
  original_transaction_id                                          BigInt?
  is_reversal                                                      Boolean?              @default(false)
  fund_accounts_wallet_transactions_from_account_idTofund_accounts fund_accounts?        @relation("wallet_transactions_from_account_idTofund_accounts", fields: [from_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  walletusers_wallet_transactions_from_wallet_idTowalletusers      walletusers?          @relation("wallet_transactions_from_wallet_idTowalletusers", fields: [from_wallet_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  wallet_transactions                                              wallet_transactions?  @relation("wallet_transactionsTowallet_transactions", fields: [original_transaction_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  other_wallet_transactions                                        wallet_transactions[] @relation("wallet_transactionsTowallet_transactions")
  fund_accounts_wallet_transactions_to_account_idTofund_accounts   fund_accounts?        @relation("wallet_transactions_to_account_idTofund_accounts", fields: [to_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  walletusers_wallet_transactions_to_wallet_idTowalletusers        walletusers?          @relation("wallet_transactions_to_wallet_idTowalletusers", fields: [to_wallet_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([from_account_id], map: "wallet_transactions_from_account_id_index")
  @@index([from_wallet_id], map: "wallet_transactions_from_wallet_id_index")
  @@index([is_reversal], map: "wallet_transactions_is_reversal_index")
  @@index([original_transaction_id], map: "wallet_transactions_original_transaction_id_index")
  @@index([status], map: "wallet_transactions_status_index")
  @@index([to_account_id], map: "wallet_transactions_to_account_id_index")
  @@index([to_wallet_id], map: "wallet_transactions_to_wallet_id_index")
  @@index([type], map: "wallet_transactions_type_index")
}

model walletusers {
  id                                                                  BigInt                      @id @default(autoincrement())
  email                                                               String?                     @db.Citext
  hashed_password                                                     String                      @db.VarChar(255)
  confirmed_at                                                        DateTime?                   @db.Timestamp(0)
  inserted_at                                                         DateTime                    @db.Timestamp(0)
  updated_at                                                          DateTime                    @db.Timestamp(0)
  first_name                                                          String?                     @db.VarChar(255)
  last_name                                                           String?                     @db.VarChar(255)
  id_number                                                           String?                     @db.VarChar(255)
  id_image                                                            String?
  mobile_number                                                       String?                     @unique(map: "walletusers_mobile_number_index") @db.VarChar(255)
  currency                                                            String?                     @db.VarChar(255)
  balance                                                             Decimal?                    @db.Decimal(10, 2)
  status                                                              String?                     @db.VarChar(255)
  first_time_login                                                    Boolean?
  frozen                                                              Boolean?
  locked                                                              Boolean?
  blocked                                                             Boolean?
  memorable_word                                                      String?                     @db.VarChar(255)
  otp                                                                 String?                     @db.VarChar(255)
  pin                                                                 String?                     @db.VarChar(255)
  date_of_birth                                                       DateTime?                   @db.Date
  address                                                             String?                     @db.VarChar(255)
  city                                                                String?                     @db.VarChar(255)
  occupation                                                          String?                     @db.VarChar(255)
  employer_name                                                       String?                     @db.VarChar(255)
  source_of_funds                                                     String?                     @db.VarChar(255)
  kyc_complete                                                        Boolean?                    @default(false)
  kyc_verified_at                                                     DateTime?                   @db.Timestamp(0)
  wallet_tier_id                                                      BigInt?
  session_id                                                          String?                     @db.Uuid
  daily_notification_limit                                            Int?                        @default(100)
  weekly_notification_limit                                           Int?                        @default(500)
  monthly_notification_limit                                          Int?                        @default(2000)
  notification_count                                                  Int?                        @default(0)
  last_notification_reset                                             DateTime?                   @db.Timestamp(0)
  nickname                                                            String?                     @db.VarChar(255)
  hidden                                                              Boolean?                    @default(false)
  large_transaction_alert                                             Boolean?                    @default(false)
  large_transaction_threshold                                         Decimal?                    @default(0) @db.Decimal
  low_balance_alert                                                   Boolean?                    @default(false)
  low_balance_threshold                                               Decimal?                    @default(0) @db.Decimal
  suspicous_activity_alert                                            Boolean?                    @default(false)
  suspicous_activity_seconds_between_transactions                     Int?                        @default(0)
  bank_code                                                           String?                     @db.VarChar(255)
  branch_code                                                         String?                     @db.VarChar(255)
  bank_name                                                           String?                     @db.VarChar(255)
  enable_alerts                                                       Boolean?                    @default(false)
  primary_device_id                                                   String?                     @db.VarChar(255)
  surname                                                             String?                     @db.VarChar(255)
  other_names                                                         String?                     @db.VarChar(255)
  gender                                                              String?                     @db.VarChar(255)
  date_of_birth_string                                                String?                     @db.VarChar(255)
  date_of_issue_string                                                String?                     @db.VarChar(255)
  date_of_expiry_string                                               String?                     @db.VarChar(255)
  place_of_birth_district_name                                        String?                     @db.VarChar(255)
  nrb_validation                                                      Boolean?
  nrb_response_code                                                   Int?
  nrb_response_message                                                String?                     @db.VarChar(255)
  nrb_status                                                          String?                     @db.VarChar(255)
  nrb_status_reason                                                   String?                     @db.VarChar(255)
  nrb_status_code                                                     String?                     @db.VarChar(255)
  encrypted_balance                                                   Bytes?
  type                                                                String?                     @db.VarChar(255)
  active_devices                                                      active_devices[]
  beneficiaries                                                       beneficiaries[]
  cardless_wallet_withdraws                                           cardless_wallet_withdraws[]
  ip_whitelists                                                       ip_whitelists[]
  transactions_transactions_from_wallet_idTowalletusers               transactions[]              @relation("transactions_from_wallet_idTowalletusers")
  transactions_transactions_to_wallet_idTowalletusers                 transactions[]              @relation("transactions_to_wallet_idTowalletusers")
  user_tracking                                                       user_tracking[]
  wallet_api_key                                                      wallet_api_key[]
  wallet_tokens                                                       wallet_tokens[]
  wallet_transactions_wallet_transactions_from_wallet_idTowalletusers wallet_transactions[]       @relation("wallet_transactions_from_wallet_idTowalletusers")
  wallet_transactions_wallet_transactions_to_wallet_idTowalletusers   wallet_transactions[]       @relation("wallet_transactions_to_wallet_idTowalletusers")
  wallet_tiers                                                        wallet_tiers?               @relation(fields: [wallet_tier_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  walletusers_tokens                                                  walletusers_tokens[]

  @@index([kyc_complete], map: "walletusers_kyc_complete_index")
  @@index([wallet_tier_id], map: "walletusers_wallet_tier_id_index")
}

model walletusers_tokens {
  id             BigInt      @id @default(autoincrement())
  wallet_user_id BigInt
  token          Bytes
  context        String      @db.VarChar(255)
  sent_to        String?     @db.VarChar(255)
  inserted_at    DateTime    @db.Timestamp(0)
  walletusers    walletusers @relation(fields: [wallet_user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([context, token], map: "walletusers_tokens_context_token_index")
  @@index([wallet_user_id], map: "walletusers_tokens_wallet_user_id_index")
}

model wizard_sessions {
  id                  BigInt             @id @default(autoincrement())
  session_token       String             @unique(map: "wizard_sessions_session_token_index") @db.VarChar(255)
  wizard_id           BigInt
  current_step_number Int
  current_step_id     BigInt?
  form_data           Json?              @default("{}")
  completed_steps     Int[]              @default([])
  status              String?            @default("active") @db.VarChar(255)
  client_ip           String?            @db.VarChar(255)
  user_agent          String?            @db.VarChar(255)
  expires_at          DateTime           @db.Timestamp(0)
  inserted_at         DateTime           @db.Timestamp(0)
  updated_at          DateTime           @db.Timestamp(0)
  form_wizard_steps   form_wizard_steps? @relation(fields: [current_step_id], references: [id], onUpdate: NoAction)
  form_wizards        form_wizards       @relation(fields: [wizard_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([expires_at], map: "wizard_sessions_expires_at_index")
  @@index([status], map: "wizard_sessions_status_index")
  @@index([wizard_id], map: "wizard_sessions_wizard_id_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model wizard_step_triggers {
  id                   String   @id @db.Uuid
  wizard_step_id       Int
  trigger_id           String   @db.Uuid
  execution_timing     String   @db.VarChar(255)
  execution_conditions Json?
  input_mapping        Json
  execution_order      Int?     @default(0)
  enabled              Boolean? @default(true)
  inserted_at          DateTime @db.Timestamp(0)
  updated_at           DateTime @db.Timestamp(0)
  source_step_number   Int      @default(0)
  triggers             triggers @relation(fields: [trigger_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([wizard_step_id, trigger_id], map: "wizard_step_triggers_unique_step_trigger")
  @@index([enabled], map: "wizard_step_triggers_enabled_index")
  @@index([execution_order], map: "wizard_step_triggers_execution_order_index")
  @@index([execution_timing], map: "wizard_step_triggers_execution_timing_index")
  @@index([source_step_number], map: "wizard_step_triggers_source_step_number_index")
  @@index([trigger_id], map: "wizard_step_triggers_trigger_id_index")
  @@index([wizard_step_id], map: "wizard_step_triggers_wizard_step_id_index")
}

model wizard_triggers {
  id                    String             @id @db.Uuid
  wizard_id             BigInt
  wizard_step_id        BigInt?
  trigger_id            String             @db.Uuid
  request_template_id   BigInt?
  execution_timing      String             @db.VarChar(255)
  execution_order       Int                @default(1)
  data_mapping          Json               @default("{}")
  conditions            Json               @default("{}")
  enabled               Boolean            @default(true)
  created_by            String?            @db.VarChar(255)
  updated_by            String?            @db.VarChar(255)
  inserted_at           DateTime           @db.Timestamp(0)
  updated_at            DateTime           @db.Timestamp(0)
  depends_on_trigger_id String?            @db.Uuid
  execution_condition   Json?              @default("{}")
  wizard_triggers       wizard_triggers?   @relation("wizard_triggersTowizard_triggers", fields: [depends_on_trigger_id], references: [id], onUpdate: NoAction)
  other_wizard_triggers wizard_triggers[]  @relation("wizard_triggersTowizard_triggers")
  request_templates     request_templates? @relation(fields: [request_template_id], references: [id], onUpdate: NoAction)
  triggers              triggers           @relation(fields: [trigger_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  form_wizards          form_wizards       @relation(fields: [wizard_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  form_wizard_steps     form_wizard_steps? @relation(fields: [wizard_step_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([depends_on_trigger_id], map: "wizard_triggers_depends_on_trigger_id_index")
  @@index([execution_timing], map: "wizard_triggers_execution_timing_index")
  @@index([request_template_id], map: "wizard_triggers_request_template_id_index")
  @@index([trigger_id], map: "wizard_triggers_trigger_id_index")
  @@index([wizard_id], map: "wizard_triggers_wizard_id_index")
  @@index([wizard_step_id], map: "wizard_triggers_wizard_step_id_index")
}

enum MobileUserContext {
  MOBILE_BANKING
  WALLET
  VILLAGE_BANKING
  AGENT
  MERCHANT
}

enum CoreBankingAuthType {
  BASIC
  BEARER
}

enum MigrationStatus {
  PENDING
  RUNNING
  COMPLETED
  FAILED
}

enum BeneficiaryType {
  WALLET
  BANK_INTERNAL
  BANK_EXTERNAL
}

enum oban_job_state {
  available
  scheduled
  executing
  retryable
  completed
  discarded
  cancelled
}
