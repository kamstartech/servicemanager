model MobileUser {
  id      Int               @id @default(autoincrement())
  context MobileUserContext

  // Login identifiers (only some are used depending on context)
  username    String? @db.Text
  phoneNumber String? @db.Text

  // Core banking linkage
  customerNumber String? @db.Text

  // Secrets (storage/validation rules depend on context)
  passwordHash String? @db.Text
  secretHash   String? @map("secret") @db.Text

  smsNotifications   Boolean @default(true) @map("sms_notifications")
  emailNotifications Boolean @default(true) @map("email_notifications")
  pushNotifications  Boolean @default(true) @map("push_notifications")
  allowMultiSession  Boolean @default(false) @map("allow_multi_session")

  isActive  Boolean  @default(true)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // Relations
  beneficiaries        Beneficiary[]
  devices              MobileDevice[]
  accounts             MobileUserAccount[]
  loginAttempts        DeviceLoginAttempt[]
  profile              MobileUserProfile?
  sessions             DeviceSession[]
  registrationRequests RequestedRegistration[]
  alertSettings        AccountAlertSettings[]
  alerts               AccountAlert[]
  suspiciousActivities SuspiciousActivityLog[]
  checkbookRequests    CheckbookRequest[]
  notifications        PushNotification[]
  kyc                  MobileUserKYC?
  
  // Transaction relationships
  initiatedTransactions      FdhTransaction[] @relation("InitiatedBy")
  tickets                    SupportTicket[]

  @@map("fdh_mobile_users")
}
